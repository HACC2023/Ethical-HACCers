"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.resendAuthRequest = void 0;
const send_1 = require("../../test-run/request/send");
const testcafe_hammerhead_1 = require("testcafe-hammerhead");
// @ts-ignore
const url_to_options_1 = __importDefault(require("url-to-options"));
async function resendAuthRequest(request, credentials) {
    const url = new URL(request.url);
    const urlRequestOptions = (0, url_to_options_1.default)(url);
    const requestOptions = new testcafe_hammerhead_1.RequestOptions(Object.assign(urlRequestOptions, {
        body: request.postData || '',
        auth: `${credentials.username}:${credentials.password}`,
        headers: request.headers,
        method: request.method,
    }));
    return (0, send_1.send)(requestOptions);
}
exports.resendAuthRequest = resendAuthRequest;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzZW5kQXV0aFJlcXVlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbmF0aXZlLWF1dG9tYXRpb24vcmVxdWVzdC1waXBlbGluZS9yZXNlbmRBdXRoUmVxdWVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFHQSxzREFBbUQ7QUFFbkQsNkRBQXFEO0FBQ3JELGFBQWE7QUFDYixvRUFBOEM7QUFFdkMsS0FBSyxVQUFVLGlCQUFpQixDQUFFLE9BQXdCLEVBQUUsV0FBNEI7SUFDM0YsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRWpDLE1BQU0saUJBQWlCLEdBQUcsSUFBQSx3QkFBZ0IsRUFBQyxHQUFHLENBQUMsQ0FBQztJQUVoRCxNQUFNLGNBQWMsR0FBRyxJQUFJLG9DQUFjLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRTtRQUN2RSxJQUFJLEVBQUssT0FBTyxDQUFDLFFBQVEsSUFBSSxFQUFFO1FBQy9CLElBQUksRUFBSyxHQUFHLFdBQVcsQ0FBQyxRQUFRLElBQUksV0FBVyxDQUFDLFFBQVEsRUFBRTtRQUMxRCxPQUFPLEVBQUUsT0FBTyxDQUFDLE9BQU87UUFDeEIsTUFBTSxFQUFHLE9BQU8sQ0FBQyxNQUFNO0tBQzFCLENBQUMsQ0FBQyxDQUFDO0lBRUosT0FBTyxJQUFBLFdBQUksRUFBQyxjQUFjLENBQUMsQ0FBQztBQUNoQyxDQUFDO0FBYkQsOENBYUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvdG9jb2wgZnJvbSAnZGV2dG9vbHMtcHJvdG9jb2wnO1xuaW1wb3J0IE5ldHdvcmsgPSBQcm90b2NvbC5OZXR3b3JrO1xuaW1wb3J0IHsgQXV0aENyZWRlbnRpYWxzIH0gZnJvbSAnLi4vLi4vYXBpL3N0cnVjdHVyZS9pbnRlcmZhY2VzJztcbmltcG9ydCB7IHNlbmQgfSBmcm9tICcuLi8uLi90ZXN0LXJ1bi9yZXF1ZXN0L3NlbmQnO1xuaW1wb3J0IHsgUmVzcG9uc2VPcHRpb25zIH0gZnJvbSAnLi4vLi4vdGVzdC1ydW4vcmVxdWVzdC9pbnRlcmZhY2VzJztcbmltcG9ydCB7IFJlcXVlc3RPcHRpb25zIH0gZnJvbSAndGVzdGNhZmUtaGFtbWVyaGVhZCc7XG4vLyBAdHMtaWdub3JlXG5pbXBvcnQgdXJsVG9IdHRwT3B0aW9ucyBmcm9tICd1cmwtdG8tb3B0aW9ucyc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXNlbmRBdXRoUmVxdWVzdCAocmVxdWVzdDogTmV0d29yay5SZXF1ZXN0LCBjcmVkZW50aWFsczogQXV0aENyZWRlbnRpYWxzKTogUHJvbWlzZTxSZXNwb25zZU9wdGlvbnMgfCBzdHJpbmc+IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcblxuICAgIGNvbnN0IHVybFJlcXVlc3RPcHRpb25zID0gdXJsVG9IdHRwT3B0aW9ucyh1cmwpO1xuXG4gICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSBuZXcgUmVxdWVzdE9wdGlvbnMoT2JqZWN0LmFzc2lnbih1cmxSZXF1ZXN0T3B0aW9ucywge1xuICAgICAgICBib2R5OiAgICByZXF1ZXN0LnBvc3REYXRhIHx8ICcnLFxuICAgICAgICBhdXRoOiAgICBgJHtjcmVkZW50aWFscy51c2VybmFtZX06JHtjcmVkZW50aWFscy5wYXNzd29yZH1gLFxuICAgICAgICBoZWFkZXJzOiByZXF1ZXN0LmhlYWRlcnMsXG4gICAgICAgIG1ldGhvZDogIHJlcXVlc3QubWV0aG9kLFxuICAgIH0pKTtcblxuICAgIHJldHVybiBzZW5kKHJlcXVlc3RPcHRpb25zKTtcbn1cbiJdfQ==