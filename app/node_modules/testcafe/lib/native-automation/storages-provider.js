"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CdpStoragesProvider = void 0;
const get_active_client_1 = require("./utils/get-active-client");
const base_1 = require("../test-run/storages/base");
class CdpStoragesProvider extends base_1.StoragesProviderBase {
    async _getCdpClient() {
        const browserConnection = this.testRun.browserConnection;
        return (0, get_active_client_1.getActiveClient)(browserConnection);
    }
    async clearStorages() {
        const client = await this._getCdpClient();
        await client.Storage.clearDataForOrigin({ origin: '*', storageTypes: 'all' });
    }
}
exports.CdpStoragesProvider = CdpStoragesProvider;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmFnZXMtcHJvdmlkZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvbmF0aXZlLWF1dG9tYXRpb24vc3RvcmFnZXMtcHJvdmlkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsaUVBQTREO0FBQzVELG9EQUFtRjtBQUVuRixNQUFhLG1CQUFvQixTQUFRLDJCQUFvQjtJQUNqRCxLQUFLLENBQUMsYUFBYTtRQUN2QixNQUFNLGlCQUFpQixHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUM7UUFFekQsT0FBTyxJQUFBLG1DQUFlLEVBQUMsaUJBQWlCLENBQUMsQ0FBQztJQUM5QyxDQUFDO0lBRUQsS0FBSyxDQUFDLGFBQWE7UUFDZixNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUUxQyxNQUFNLE1BQU0sQ0FBQyxPQUFPLENBQUMsa0JBQWtCLENBQUMsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQ2xGLENBQUM7Q0FDSjtBQVpELGtEQVlDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHJlbW90ZUNocm9tZSBmcm9tICdjaHJvbWUtcmVtb3RlLWludGVyZmFjZSc7XG5pbXBvcnQgeyBnZXRBY3RpdmVDbGllbnQgfSBmcm9tICcuL3V0aWxzL2dldC1hY3RpdmUtY2xpZW50JztcbmltcG9ydCB7IFN0b3JhZ2VzUHJvdmlkZXIsIFN0b3JhZ2VzUHJvdmlkZXJCYXNlIH0gZnJvbSAnLi4vdGVzdC1ydW4vc3RvcmFnZXMvYmFzZSc7XG5cbmV4cG9ydCBjbGFzcyBDZHBTdG9yYWdlc1Byb3ZpZGVyIGV4dGVuZHMgU3RvcmFnZXNQcm92aWRlckJhc2UgaW1wbGVtZW50cyBTdG9yYWdlc1Byb3ZpZGVyIHtcbiAgICBwcml2YXRlIGFzeW5jIF9nZXRDZHBDbGllbnQgKCk6IFByb21pc2U8cmVtb3RlQ2hyb21lLlByb3RvY29sQXBpPiB7XG4gICAgICAgIGNvbnN0IGJyb3dzZXJDb25uZWN0aW9uID0gdGhpcy50ZXN0UnVuLmJyb3dzZXJDb25uZWN0aW9uO1xuXG4gICAgICAgIHJldHVybiBnZXRBY3RpdmVDbGllbnQoYnJvd3NlckNvbm5lY3Rpb24pO1xuICAgIH1cblxuICAgIGFzeW5jIGNsZWFyU3RvcmFnZXMgKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLl9nZXRDZHBDbGllbnQoKTtcblxuICAgICAgICBhd2FpdCBjbGllbnQuU3RvcmFnZS5jbGVhckRhdGFGb3JPcmlnaW4oeyBvcmlnaW46ICcqJywgc3RvcmFnZVR5cGVzOiAnYWxsJyB9KTtcbiAgICB9XG59XG4iXX0=