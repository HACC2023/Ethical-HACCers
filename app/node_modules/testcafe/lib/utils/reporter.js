"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.processReporterName = exports.isReporterPluginFactory = exports.getPluginFactory = exports.requireReporterPluginFactory = void 0;
const runtime_1 = require("../errors/runtime");
const module_prefix_1 = __importDefault(require("../reporter/module-prefix"));
function requireReporterPluginFactory(reporterName) {
    const reporterFullName = `${module_prefix_1.default}${reporterName}`;
    try {
        return require(reporterFullName);
    }
    catch (err) {
        throw new runtime_1.LoadReporterError(err, reporterFullName);
    }
}
exports.requireReporterPluginFactory = requireReporterPluginFactory;
function getPluginFactory(reporterFactorySource) {
    if (!isReporterPluginFactory(reporterFactorySource))
        return requireReporterPluginFactory(reporterFactorySource);
    return reporterFactorySource;
}
exports.getPluginFactory = getPluginFactory;
function isReporterPluginFactory(value) {
    return typeof value === 'function';
}
exports.isReporterPluginFactory = isReporterPluginFactory;
function processReporterName(value) {
    if (isReporterPluginFactory(value))
        return value.name || 'function () {}';
    return value;
}
exports.processReporterName = processReporterName;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwb3J0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdXRpbHMvcmVwb3J0ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0EsK0NBQXNEO0FBQ3RELDhFQUErRDtBQUUvRCxTQUFnQiw0QkFBNEIsQ0FBRSxZQUFvQjtJQUM5RCxNQUFNLGdCQUFnQixHQUFHLEdBQUcsdUJBQXNCLEdBQUcsWUFBWSxFQUFFLENBQUM7SUFFcEUsSUFBSTtRQUNBLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUM7S0FDcEM7SUFDRCxPQUFPLEdBQVEsRUFBRTtRQUNiLE1BQU0sSUFBSSwyQkFBaUIsQ0FBQyxHQUFHLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztLQUN0RDtBQUNMLENBQUM7QUFURCxvRUFTQztBQUVELFNBQWdCLGdCQUFnQixDQUFFLHFCQUFxRDtJQUNuRixJQUFJLENBQUMsdUJBQXVCLENBQUMscUJBQXFCLENBQUM7UUFDL0MsT0FBTyw0QkFBNEIsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0lBRS9ELE9BQU8scUJBQXFCLENBQUM7QUFDakMsQ0FBQztBQUxELDRDQUtDO0FBRUQsU0FBZ0IsdUJBQXVCLENBQUUsS0FBd0I7SUFDN0QsT0FBTyxPQUFPLEtBQUssS0FBSyxVQUFVLENBQUM7QUFDdkMsQ0FBQztBQUZELDBEQUVDO0FBRUQsU0FBZ0IsbUJBQW1CLENBQUUsS0FBcUM7SUFDdEUsSUFBSSx1QkFBdUIsQ0FBQyxLQUFLLENBQUM7UUFDOUIsT0FBTyxLQUFLLENBQUMsSUFBSSxJQUFJLGdCQUFnQixDQUFDO0lBRTFDLE9BQU8sS0FBSyxDQUFDO0FBQ2pCLENBQUM7QUFMRCxrREFLQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcG9ydGVyUGx1Z2luRmFjdG9yeSB9IGZyb20gJy4uL3JlcG9ydGVyL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgTG9hZFJlcG9ydGVyRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMvcnVudGltZSc7XG5pbXBvcnQgUkVQT1JURVJfTU9EVUxFX1BSRUZJWCBmcm9tICcuLi9yZXBvcnRlci9tb2R1bGUtcHJlZml4JztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlcXVpcmVSZXBvcnRlclBsdWdpbkZhY3RvcnkgKHJlcG9ydGVyTmFtZTogc3RyaW5nKTogUmVwb3J0ZXJQbHVnaW5GYWN0b3J5IHtcbiAgICBjb25zdCByZXBvcnRlckZ1bGxOYW1lID0gYCR7UkVQT1JURVJfTU9EVUxFX1BSRUZJWH0ke3JlcG9ydGVyTmFtZX1gO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHJlcXVpcmUocmVwb3J0ZXJGdWxsTmFtZSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnI6IGFueSkge1xuICAgICAgICB0aHJvdyBuZXcgTG9hZFJlcG9ydGVyRXJyb3IoZXJyLCByZXBvcnRlckZ1bGxOYW1lKTtcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQbHVnaW5GYWN0b3J5IChyZXBvcnRlckZhY3RvcnlTb3VyY2U6IHN0cmluZyB8IFJlcG9ydGVyUGx1Z2luRmFjdG9yeSk6IFJlcG9ydGVyUGx1Z2luRmFjdG9yeSB7XG4gICAgaWYgKCFpc1JlcG9ydGVyUGx1Z2luRmFjdG9yeShyZXBvcnRlckZhY3RvcnlTb3VyY2UpKVxuICAgICAgICByZXR1cm4gcmVxdWlyZVJlcG9ydGVyUGx1Z2luRmFjdG9yeShyZXBvcnRlckZhY3RvcnlTb3VyY2UpO1xuXG4gICAgcmV0dXJuIHJlcG9ydGVyRmFjdG9yeVNvdXJjZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVwb3J0ZXJQbHVnaW5GYWN0b3J5ICh2YWx1ZTogc3RyaW5nIHwgRnVuY3Rpb24pOiB2YWx1ZSBpcyBSZXBvcnRlclBsdWdpbkZhY3Rvcnkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzUmVwb3J0ZXJOYW1lICh2YWx1ZTogc3RyaW5nIHwgUmVwb3J0ZXJQbHVnaW5GYWN0b3J5KTogc3RyaW5nIHtcbiAgICBpZiAoaXNSZXBvcnRlclBsdWdpbkZhY3RvcnkodmFsdWUpKVxuICAgICAgICByZXR1cm4gdmFsdWUubmFtZSB8fCAnZnVuY3Rpb24gKCkge30nO1xuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuIl19