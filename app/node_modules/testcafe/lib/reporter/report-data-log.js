"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class ReportDataLog {
    constructor(callback) {
        this._data = [];
        this.callback = callback;
    }
    get data() {
        return this._data;
    }
    async addData(data) {
        if (this.callback)
            await this.callback(data);
        this._data.push(...data);
    }
    static createAddDataCallback(messageBus, testRun) {
        return async (data) => {
            if (messageBus)
                await messageBus.emit('report-data', { data, testRun });
        };
    }
}
exports.default = ReportDataLog;
module.exports = exports.default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVwb3J0LWRhdGEtbG9nLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3JlcG9ydGVyL3JlcG9ydC1kYXRhLWxvZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUtBLE1BQXFCLGFBQWE7SUFJOUIsWUFBb0IsUUFBZ0M7UUFDaEQsSUFBSSxDQUFDLEtBQUssR0FBTSxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDN0IsQ0FBQztJQUVELElBQVcsSUFBSTtRQUNYLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUN0QixDQUFDO0lBRU0sS0FBSyxDQUFDLE9BQU8sQ0FBRSxJQUFXO1FBQzdCLElBQUksSUFBSSxDQUFDLFFBQVE7WUFDYixNQUFNLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUM3QixDQUFDO0lBRU0sTUFBTSxDQUFDLHFCQUFxQixDQUFFLFVBQWtDLEVBQUUsT0FBZ0I7UUFDckYsT0FBTyxLQUFLLEVBQUUsSUFBVyxFQUFFLEVBQUU7WUFDekIsSUFBSSxVQUFVO2dCQUNWLE1BQU0sVUFBVSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUNoRSxDQUFDLENBQUM7SUFDTixDQUFDO0NBQ0o7QUExQkQsZ0NBMEJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1lc3NhZ2VCdXMgZnJvbSAnLi4vdXRpbHMvbWVzc2FnZS1idXMnO1xuaW1wb3J0IFRlc3RSdW4gZnJvbSAnLi4vdGVzdC1ydW4nO1xuXG50eXBlIFJlcG9ydERhdGFMb2dDYWxsYmFjayA9IChkYXRhOiBhbnlbXSkgPT4gUHJvbWlzZTx2b2lkPjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVwb3J0RGF0YUxvZyB7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfZGF0YTogYW55W107XG4gICAgcHVibGljIGNhbGxiYWNrPzogUmVwb3J0RGF0YUxvZ0NhbGxiYWNrO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yIChjYWxsYmFjaz86IFJlcG9ydERhdGFMb2dDYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9kYXRhICAgID0gW107XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0IGRhdGEgKCk6IGFueVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGFkZERhdGEgKGRhdGE6IGFueVtdKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICh0aGlzLmNhbGxiYWNrKVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jYWxsYmFjayhkYXRhKTtcblxuICAgICAgICB0aGlzLl9kYXRhLnB1c2goLi4uZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVBZGREYXRhQ2FsbGJhY2sgKG1lc3NhZ2VCdXM6IE1lc3NhZ2VCdXMgfCB1bmRlZmluZWQsIHRlc3RSdW46IFRlc3RSdW4pOiBSZXBvcnREYXRhTG9nQ2FsbGJhY2sge1xuICAgICAgICByZXR1cm4gYXN5bmMgKGRhdGE6IGFueVtdKSA9PiB7XG4gICAgICAgICAgICBpZiAobWVzc2FnZUJ1cylcbiAgICAgICAgICAgICAgICBhd2FpdCBtZXNzYWdlQnVzLmVtaXQoJ3JlcG9ydC1kYXRhJywgeyBkYXRhLCB0ZXN0UnVuIH0pO1xuICAgICAgICB9O1xuICAgIH1cbn1cbiJdfQ==