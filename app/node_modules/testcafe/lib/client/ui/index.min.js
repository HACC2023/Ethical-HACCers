window["%hammerhead%"].utils.removeInjectedScript(),function jl(ql){var Gl=ql.document;!function(u,c,e){var t="default"in u?u.default:u,n="default"in c?c.default:c;e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var h={uiRoot:null,container:null,element:function(){return this.uiRoot||(this.uiRoot=Gl.createElement("div"),u.shadowUI.getRoot().appendChild(this.uiRoot)),this.uiRoot},panelsContainer:function(){return this.container||(this.container=Gl.createElement("div"),u.shadowUI.addClass(this.container,"panels-container"),this.element().appendChild(this.container)),this.container},insertFirstChildToPanelsContainer:function(t){var e=this.panelsContainer(),n=u.nativeMethods.nodeFirstChildGetter.call(e);e.insertBefore(t,n)},hide:function(){this.uiRoot&&(this.uiRoot.style.visibility="hidden")},show:function(){this.uiRoot&&(this.uiRoot.style.visibility="")},remove:function(){var t=u.shadowUI.getRoot();u.nativeMethods.nodeParentNodeGetter.call(t).removeChild(t)}},d=t.shadowUI,p=t.utils.browser,o=t.utils.featureDetection,f=t.nativeMethods,m=t.eventSandbox.eventSimulator,v=t.eventSandbox.listeners,g=n.positionUtils,y=n.domUtils,_=n.styleUtils,C=n.eventUtils,b=n.arrayUtils,E=n.selectController,w="tcOptionList",a="disabled",S=p.isIE?30:20;function T(t){var e=f.eventTargetGetter.call(t),n=E.currentEl;(e||t.srcElement)===n||y.containsElement(n,e)||y.containsElement(E.optionList,e)||I()}function x(t,e,n){var i,r=f.eventTargetGetter.call(t),s=b.indexOf(E.options,r);s<0||(n(),(i=-1<r.className.indexOf(a))&&p.isWebKit||function(t,e){var n=E.currentEl,i=n.selectedIndex,r=n.getElementsByTagName("option")[t],s=!e&&t!==i;s&&!p.isIE&&(n.selectedIndex=t),p.isFirefox||p.isIE||!s||(m.input(n),m.change(n)),(p.isFirefox||p.isIE)&&m.mousedown(p.isFirefox?r:n),o.isTouchDevice||m.mouseup(p.isFirefox?r:n),(p.isFirefox||p.isIE)&&s&&(p.isIE&&(n.selectedIndex=t),p.isIE||m.input(n),m.change(n)),o.isTouchDevice||m.click(p.isFirefox||p.isIE?r:n),e||I()}(s,i))}function I(){y.remove(E.optionList),C.unbind(Gl,"mousedown",T),E.clear()}var i=Object.freeze({__proto__:null,expandOptionList:function(t){var e=t.children;if(e.length&&!t.disabled){if(E.currentEl){var n=t===E.currentEl;if(I(),n)return}var i=E.currentEl=t,r=E.optionList=Gl.createElement("div");h.element().appendChild(r),d.addClass(r,w),E.createChildren(e,r),v.addInternalEventBeforeListener(ql,["click"],x),f.setTimeout.call(ql,function(){C.bind(Gl,"mousedown",T)},0),_.set(r,{position:"absolute",fontSize:_.get(i,"fontSize"),fontFamily:_.get(i,"fontFamily"),minWidth:_.getWidth(i)+"px",left:g.getOffsetPosition(i).left+"px",height:y.getSelectVisibleChildren(t).length>S?_.getOptionHeight(t)*S:""});var s,o=g.getOffsetPosition(i).top,a=_.getHeight(r),l=o+_.getHeight(i)+2;l+a>_.getScrollTop(ql)+_.getHeight(ql)&&(s=o-3-a)>=_.getScrollTop(ql)&&(l=s),_.set(r,"top",l+"px")}},collapseOptionList:I,scrollOptionListByChild:function(t){var e,n,i,r,s,o,a=y.getSelectParent(t);a&&(e=_.getSelectElementSize(a),n=_.getOptionHeight(a),i=0,s=(r=Math.max(_.getScrollTop(a)/n,0))+e-1,(o=y.getChildVisibleIndex(a,t))<r?(i=n*(r-o),_.setScrollTop(a,Math.max(_.getScrollTop(a)-i,0))):s<o&&(i=n*(o-s),_.setScrollTop(a,_.getScrollTop(a)+i)))},getSelectChildCenter:function(t){var e=y.getSelectParent(t);if(!e)return{x:0,y:0};var n=_.getOptionHeight(e),i=g.getElementRectangle(t);return{x:Math.round(i.left+i.width/2),y:Math.round(i.top+n/2)}},switchOptionsByKeys:function(t,e){var n=_.getSelectElementSize(t),i=!_.hasDimensions(d.select("."+w)[0]);if(/down|up/.test(e)||!p.isIE&&(n<=1||p.isFirefox)&&(i||p.isFirefox)&&/left|right/.test(e)){for(var r=t.querySelectorAll("option"),s=[],o=0;o<r.length;o++){var a=r[o].parentElement;r[o].disabled||"optgroup"===y.getTagName(a)&&a.disabled||s.push(r[o])}var l=b.indexOf(s,r[t.selectedIndex])+(/down|right/.test(e)?1:-1);0<=l&&l<s.length&&(t.selectedIndex=b.indexOf(r,s[l]),p.isIE||m.input(t),m.change(t))}}}),r="Loading page...",s="modal-background",l="loading-text",A="loading-icon",M=null,B=null,N=null,U=!1;function R(){function t(){var t=c.styleUtils.getHeight(ql),e=c.styleUtils.getWidth(ql);c.styleUtils.set(M,"width",e+"px"),c.styleUtils.set(M,"height",t+"px"),c.styleUtils.set(N,{left:Math.round((e-c.styleUtils.getWidth(N))/2)+"px",top:Math.round((t-c.styleUtils.getHeight(N))/2)+"px"})}t(),c.eventUtils.bind(ql,"resize",t)}function D(){var t,e,n,i;t=h.element(),M=Gl.createElement("div"),t.appendChild(M),u.shadowUI.addClass(M,s),B=Gl.createElement("div"),u.nativeMethods.nodeTextContentSetter.call(B,r),t.appendChild(B),u.shadowUI.addClass(B,l),N=Gl.createElement("div"),c.styleUtils.set(N,"visibility","hidden"),t.appendChild(N),u.shadowUI.addClass(N,A),R(),e=c.styleUtils.getHeight(ql),n=c.styleUtils.getWidth(ql),(i=!c.styleUtils.hasDimensions(B))&&(c.styleUtils.set(B,"visibility","hidden"),c.styleUtils.set(B,"display","block")),c.styleUtils.set(B,{left:Math.max((n-c.styleUtils.getWidth(B))/2,0)+"px",top:Math.max((e-c.styleUtils.getHeight(B))/2,0)+"px"}),i&&(c.styleUtils.set(B,"display","none"),c.styleUtils.set(B,"visibility","")),U=!0}var k=Object.freeze({__proto__:null,initAndShowLoadingText:function(){function t(){D(),c.styleUtils.set(M,"opacity",.8),c.styleUtils.set(M,"display","block"),c.styleUtils.set(B,"display","block"),e=!0}var e=!1,n=function(){e||(Gl.body?t():u.nativeMethods.setTimeout.call(ql,n,0))};n(),c.eventUtils.documentReady().then(function(){e||t()})},show:function(t){U||D(),c.styleUtils.set(M,"opacity",t?0:.7),c.styleUtils.set(M,"display","block")},hide:function(){U&&(c.styleUtils.set(B,"display","none"),c.styleUtils.set(M,"display","none"))},showLoadingIcon:function(){c.styleUtils.set(N,"visibility","visible")},hideLoadingIcon:function(){c.styleUtils.set(N,"visibility","hidden")}}),V=t.shadowUI,O=n.styleUtils,P="success",F=($.prototype.setValue=function(t){t="number"!=typeof t?0:Math.min(Math.max(t,0),100),O.set(this.valueElement,"width",t+"%")},$.prototype.setSuccess=function(t){t?V.addClass(this.containerElement,P):V.removeClass(this.containerElement,P)},$);function $(t){this.containerElement=Gl.createElement("div"),this.valueElement=Gl.createElement("div"),t.appendChild(this.containerElement),this.containerElement.appendChild(this.valueElement),V.addClass(this.containerElement,"progress-bar"),V.addClass(this.valueElement,"value")}var L=t.shadowUI,z=t.nativeMethods,H=n.eventUtils,W=n.styleUtils,j="progress-panel",q="title",G="content",Y=(X._getInvisibleElementProperty=function(t,e){var n="none"===W.get(t,"display");n&&W.set(t,"display","block");var i=t[e];return n&&W.set(t,"display","none"),i},X._showAtWindowCenter=function(t){var e=X._getInvisibleElementProperty(t,"offsetHeight"),n=X._getInvisibleElementProperty(t,"offsetWidth"),i=Math.round(W.getHeight(ql)/2-e/2),r=Math.round(W.getWidth(ql)/2-n/2);W.set(t,{left:r+"px",top:i+"px"})},X.prototype._setCurrentProgress=function(){var t=Math.round((z.dateNow()-this.startTime)/this.maxTimeout*100);this.progressBar.setValue(t)},X.prototype._setSuccess=function(t){this.progressBar.setSuccess(t)},X.prototype._stopAnimation=function(){z.clearInterval.call(ql,this.animationInterval)},X.prototype._animate=function(t,e,n,i){var r,s,o,a=this,l=z.dateNow(),u=n?0:1;n&&(W.set(t,"opacity",u),W.set(t,"display","block")),this._stopAnimation(),this.animationInterval=z.setInterval.call(ql,function(){r=z.dateNow()-l,s=Math.min(r/e,1),o=.5-Math.cos(s*Math.PI)/2,W.set(t,"opacity",u+(n?o:-o)),1===s&&(a._stopAnimation(),i&&i())},10)},X.prototype._showPanel=function(){H.bind(ql,"resize",this.disposePanel),this._animate(this.panelDiv,200,!0)},X.prototype._hidePanel=function(t){var e=this;this.startTime=null,H.unbind(ql,"resize",this.disposePanel),this._animate(this.panelDiv,t?0:600,!1,function(){return W.set(e.panelDiv,"display","none")})},X.prototype.show=function(t,e){var n=this;this.startTime=z.dateNow(),this.maxTimeout=e,z.nodeTextContentSetter.call(this.titleDiv,t),this._setSuccess(!1),this.openingTimeout=z.setTimeout.call(ql,function(){n.openingTimeout=null,n._setCurrentProgress(),n._showPanel(),n.updateInterval=z.setInterval.call(ql,function(){return n._setCurrentProgress()},100)},300)},X.prototype.close=function(t){var e=this;t&&this._setSuccess(!0),this.openingTimeout&&(z.clearTimeout.call(ql,this.openingTimeout),this.openingTimeout=null),this.updateInterval&&(z.clearInterval.call(ql,this.updateInterval),this.updateInterval=null),t?this.startTime&&z.dateNow()-this.startTime<1e3?z.setTimeout.call(ql,function(){z.setTimeout.call(ql,function(){return e._hidePanel(!1)},200)},100):z.setTimeout.call(ql,function(){return e._hidePanel(!1)},200):this._hidePanel(!0)},X);function X(){var t=this;this.startTime=null,this.openingTimeout=null,this.updateInterval=null,this.animationInterval=null,this.panelDiv=Gl.createElement("div"),h.element().appendChild(this.panelDiv),this.titleDiv=Gl.createElement("div"),this.panelDiv.appendChild(this.titleDiv),this.contentDiv=Gl.createElement("div"),this.panelDiv.appendChild(this.contentDiv),L.addClass(this.panelDiv,j),L.addClass(this.titleDiv,q),L.addClass(this.contentDiv,G),X._showAtWindowCenter(this.panelDiv),this.progressBar=new F(this.contentDiv),this.disposePanel=function(){return X._showAtWindowCenter(t.panelDiv)}}var K=function(t,e){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function J(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}K(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Q(t,o,a,l){return new(a=a||e)(function(n,e){function i(t){try{s(l.next(t))}catch(t){e(t)}}function r(t){try{s(l.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,r)}s((l=l.apply(t,o||[])).next())})}function Z(n,i){var r,s,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function t(e){return function(t){return function(e){if(r)throw new TypeError("Generator is already executing.");for(;l&&e[l=0]&&(a=0),a;)try{if(r=1,s&&(o=2&e[0]?s.return:e[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,e[1])).done)return o;switch(s=0,o&&(e=[2&e[0],o.value]),e[0]){case 0:case 1:o=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,s=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(o=0<(o=a.trys).length&&o[o.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){a.label=e[1];break}if(6===e[0]&&a.label<o[1]){a.label=o[1],o=e;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(e);break}o[2]&&a.ops.pop(),a.trys.pop();continue}e=i.call(n,a)}catch(t){e=[6,t],s=0}finally{r=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var tt=t.shadowUI,et=t.nativeMethods,nt=n.styleUtils,it="determinate",rt=(st.prototype._setCurrentProgress=function(){var t=(et.dateNow()-this.startTime)/this.maxTimeout,e=Math.min(Math.max(t,0),1),n=nt.getWidth(this.progressBar),i=Math.round(n*e);nt.set(this.firstValueElement,"width",i+"px")},st.prototype.start=function(t,e){var n=this;tt.addClass(this.progressBar,it),this.maxTimeout=t,this.startTime=e||et.dateNow(),this._setCurrentProgress(),this.animationInterval=et.setInterval.call(ql,function(){return n._setCurrentProgress()},10)},st.prototype.stop=function(){this.animationInterval&&(et.clearInterval.call(ql,this.animationInterval),this.animationInterval=null)},st.prototype.reset=function(){nt.set(this.firstValueElement,"width",0),tt.removeClass(this.progressBar,it)},st);function st(t,e){this.progressBar=t,this.firstValueElement=e,this.maxTimeout=null,this.startTime=null,this.animationInterval=null}function ot(t,e,n){if(e.x===t.x)return 0;var i=(e.y-t.y)/(e.x-t.x),r=t.x*(t.y-e.y)/(e.x-t.x)+t.y;return Math.round(i*n+r)}var at=t.shadowUI,lt=t.nativeMethods,ut=n.styleUtils,ct={time:2800,points:[.815,.395],positionByCompletePercent:{0:{left:-35,right:100},.6:{left:100,right:-90},1:{left:100,right:-90}}},ht={time:3e3,points:[.84,1],positionByCompletePercent:{0:{left:-200,right:100},.6:{left:107,right:-8},1:{left:107,right:-8}}},dt=0,pt=.6,ft=1,mt="indeterminate",vt=(gt._updateValueAnimation=function(t,e,n){var i,r,s,o,a,l,u,c,h,d,p=n.time,f=n.points,m=n.positionByCompletePercent,v=lt.dateNow()-t,g=(i=v/p,r=f[0],s=f[1],3*Math.pow(1-i,2)*i*r+3*(1-i)*i*i*s+i*i*i),y=(c=(l=(o=g)<pt)?pt:ft,h=(a=m)[u=l?dt:pt],d=a[c],{left:ot({x:u,y:h.left},{x:c,y:d.left},o),right:ot({x:u,y:h.right},{x:c,y:d.right},o)}),_=y.left,C=y.right;ut.set(e,"left",Math.round(_)+"%"),ut.set(e,"right",Math.round(C)+"%")},gt.prototype._clearFirstValueAnimation=function(){this.animationInterval&&(lt.clearInterval.call(ql,this.animationInterval),this.animationInterval=null),ut.set(this.firstValue,"left","-35%"),ut.set(this.firstValue,"right","100%")},gt.prototype._clearSecondValueAnimation=function(){this.secondValueAnimationInterval&&(lt.clearInterval.call(ql,this.secondValueAnimationInterval),this.secondValueAnimationInterval=null),ut.set(this.secondValue,"left","-200%"),ut.set(this.secondValue,"right","100%")},gt.prototype._startFirstValueAnimation=function(){var t=this;this._clearFirstValueAnimation();var e=lt.dateNow();this.animationInterval=lt.setInterval.call(ql,function(){gt._updateValueAnimation(e,t.firstValue,ct)},10)},gt.prototype._startSecondValueAnimation=function(){var t=this;this._clearSecondValueAnimation();var e=lt.dateNow();this.secondValueAnimationInterval=lt.setInterval.call(ql,function(){gt._updateValueAnimation(e,t.secondValue,ht)},10)},gt.prototype._startAnimation=function(){var t=this;this._startFirstValueAnimation(),this.secondValueAnimationTimeout=lt.setTimeout.call(ql,function(){return t._startSecondValueAnimation()},1e3),this.restartAnimationTimeout=lt.setTimeout.call(ql,function(){return t._startAnimation()},1950)},gt.prototype._stopAnimation=function(){this._clearFirstValueAnimation(),this._clearSecondValueAnimation(),this.secondValueAnimationTimeout&&(lt.clearInterval.call(ql,this.secondValueAnimationTimeout),this.secondValueAnimationTimeout=null),this.restartAnimationTimeout&&(lt.clearInterval.call(ql,this.restartAnimationTimeout),this.restartAnimationTimeout=null)},gt.prototype.start=function(){at.addClass(this.progressBar,mt),this._startAnimation()},gt.prototype.stop=function(){at.removeClass(this.progressBar,mt),this._stopAnimation()},gt);function gt(t,e,n){this.progressBar=t,this.firstValue=e,this.secondValue=n,this.animationInterval=null,this.secondValueAnimationInterval=null,this.secondValueAnimationTimeout=null,this.restartAnimationTimeout=null}var yt=t.shadowUI,_t=n.styleUtils,Ct=(bt.prototype._create=function(t){this.progressBar=Gl.createElement("div"),yt.addClass(this.progressBar,"progress-bar"),t.appendChild(this.progressBar);var e=Gl.createElement("div");yt.addClass(e,"value-container"),this.progressBar.appendChild(e),this.firstValueElement=Gl.createElement("div"),yt.addClass(this.firstValueElement,"value"),e.appendChild(this.firstValueElement),this.secondValueElement=Gl.createElement("div"),yt.addClass(this.secondValueElement,"value"),e.appendChild(this.secondValueElement)},bt.prototype.show=function(){_t.set(this.progressBar,"visibility","visible")},bt.prototype.hide=function(){_t.set(this.progressBar,"visibility","hidden")},bt);function bt(t){this.progressBar=null,this.firstValueElement=null,this.secondValueElement=null,this._create(t),this.determinateIndicator=new rt(this.progressBar,this.firstValueElement),this.indeterminateIndicator=new vt(this.progressBar,this.firstValueElement,this.secondValueElement)}var Et,wt="start-waiting-element",St="end-waiting-element-request",Tt="end-waiting-element-response",xt="start-waiting-assertion-retries",It="end-waiting-assertion-retries-request",At="end-waiting-assertion-retries-response",Mt="step",Bt="resume",Nt=t.Promise,Ut=t.shadowUI,Rt=t.nativeMethods,Dt=t.eventSandbox.message,kt=t.utils.browser,Vt=t.utils.featureDetection,Ot=t.eventSandbox.listeners,Pt=n.styleUtils,Ft=n.eventUtils,$t=n.domUtils,Lt=n.serviceUtils,zt=n.arrayUtils,Ht="status-bar-debugging",Wt="waiting-element-failed",jt="waiting-element-success",qt="%testCafeStatusPrefix%",Gt=(J(Yt,Et=Lt.EventEmitter),Object.defineProperty(Yt.prototype,"visibleHeight",{get:function(){return this.maxHeight=Math.max(this.maxHeight,Pt.getHeight(this.statusBar)),this.maxHeight},enumerable:!1,configurable:!0}),Yt.prototype._createButton=function(t,e){var n=Gl.createElement("div"),i=Gl.createElement("div"),r=Gl.createElement("span");return Rt.nodeTextContentSetter.call(r,t),Ut.addClass(n,"button"),Ut.addClass(n,e),Ut.addClass(i,"button-icon"),kt.isSafari&&(r.style.position="relative",r.style.top="1px"),n.appendChild(i),n.appendChild(r),n},Yt.prototype._createIconArea=function(){this.icon=Gl.createElement("div"),Ut.addClass(this.icon,"icon"),this.statusBar.appendChild(this.icon)},Yt.prototype._createInformationArea=function(){this.infoContainer=Gl.createElement("div"),Ut.addClass(this.infoContainer,"info-container"),this.statusBar.appendChild(this.infoContainer);var t=Gl.createElement("div");Ut.addClass(t,"info-text-container"),this.infoContainer.appendChild(t);var e=Gl.createElement("div");Ut.addClass(e,"status-container"),t.appendChild(e),this.statusDiv=Gl.createElement("div"),this.statusDiv=Gl.createElement("div"),Rt.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText("Loading Web Page...")),Ut.addClass(this.statusDiv,"status"),Ut.addClass(this.statusDiv,"info"),e.appendChild(this.statusDiv);var n=Gl.createElement("div");Rt.nodeTextContentSetter.call(n,"".concat(this.fixtureName," - ").concat(this.testName)),Ut.addClass(n,"fixture"),Ut.addClass(n,"info"),e.appendChild(n);var i=Gl.createElement("div");Rt.nodeTextContentSetter.call(i,this.userAgent),Ut.addClass(i,"user-agent"),t.appendChild(i)},Yt.prototype._createActionsArea=function(){var t=this;this.actionsContainer=Gl.createElement("div"),Ut.addClass(this.actionsContainer,"actions-container"),this.statusBar.appendChild(this.actionsContainer),this.buttons=Gl.createElement("div"),Ut.addClass(this.buttons,"buttons"),this.actionsContainer.appendChild(this.buttons),this.unlockButton=this._createButton("Unlock Page","locked"),this.resumeButton=this._createButton("Resume","resume"),this.nextButton=this._createButton("Next Action","step"),this.finishButton=this._createButton("Finish","finish"),this.buttons.appendChild(this.unlockButton),this.buttons.appendChild(this.resumeButton),this.buttons.appendChild(this.nextButton),this.actionsContainer.style.display="none",this._bindClickOnce([this.unlockButton],function(){Ut.removeClass(t.unlockButton,"locked"),Ut.addClass(t.unlockButton,"unlocked"),Rt.nodeTextContentSetter.call(t.unlockButton.querySelector("span"),"Page unlocked"),t.state.locked=!1,t.emit(t.UNLOCK_PAGE_BTN_CLICK,{})}),this.unlockButton.style.display="none"},Yt.prototype._create=function(){this.statusBar=Gl.createElement("div"),Ut.addClass(this.statusBar,"status-bar"),this._createIconArea(),this._createInformationArea(),this._createActionsArea(),this.progressBar=new Ct(this.infoContainer),this.progressBar.indeterminateIndicator.start(),this.progressBar.show(),h.panelsContainer().appendChild(this.statusBar),this._bindHandlers(),this.state.created=!0},Yt.prototype._createBeforeReady=function(){var t,e=this;this.state.created||(t=ql).top!==t||(Gl.body?this._create():Rt.setTimeout.call(ql,function(){return e._createBeforeReady()},0))},Yt.prototype._animate=function(t){var e,n,i,r=this,s=Rt.dateNow(),o=parseInt(Pt.get(this.statusBar,"opacity"),10)||0;this._stopAnimation(),t&&(Pt.set(this.statusBar,"visibility",""),this.state.hidden=!1),this.animationInterval=Rt.setInterval.call(ql,function(){e=Rt.dateNow()-s,n=Math.min(e/500,1),i=.5-Math.cos(n*Math.PI)/2,Pt.set(r.statusBar,"opacity",o+(t?i:-i)),1===n&&(r._stopAnimation(),t||(Pt.set(r.statusBar,"visibility","hidden"),r.state.hidden=!0),r.state.showing=!1,r.state.hiding=!1)},10)},Yt.prototype._stopAnimation=function(){this.animationInterval&&(Rt.clearInterval.call(ql,this.animationInterval),this.animationInterval=null)},Yt.prototype._fadeOut=function(){this.state.hiding||this.state.debugging||(this.state.showing=!1,this.state.hiding=!0,this._animate())},Yt.prototype._fadeIn=function(){this.state.showing||this.state.debugging||(this.state.hiding=!1,this.state.showing=!0,this._animate(!0))},Yt.prototype._bindHandlers=function(){var e=this;Ot.initElementListening(ql,["resize"]),Ot.addInternalEventBeforeListener(ql,["resize"],function(){e.windowHeight=ql.innerHeight}),Ot.addFirstInternalEventBeforeListener(ql,["mousemove","mouseout","touchmove"],function(t){"mouseout"!==t.type||t.relatedTarget?"mousemove"!==t.type&&"touchmove"!==t.type||(t.clientY>e.windowHeight-e.visibleHeight?e._fadeOut(t):e.state.hidden&&e._fadeIn(t)):e._fadeIn(t)})},Yt.prototype._bindClickOnce=function(n,i){var r=this,s=Vt.isTouchDevice?"touchstart":"mousedown",o=function(t){var e=Rt.eventTargetGetter.call(t);zt.find(n,function(t){return $t.containsElement(t,e)})?(Ft.preventDefault(t),Ot.removeInternalEventBeforeListener(ql,[s],o),i(t)):$t.containsElement(r.statusBar,e)&&Ft.preventDefault(t)};Ot.addInternalEventBeforeListener(ql,[s],o)},Yt.prototype._initChildListening=function(){var n=this;Dt.on(Dt.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;e.cmd===wt?n.showWaitingElementStatus(e.timeout):e.cmd===St?n.hideWaitingElementStatus(e.waitingSuccess).then(function(){return Dt.sendServiceMsg({cmd:Tt},t.source)}):e.cmd===xt?n.showWaitingAssertionRetriesStatus(e.timeout):e.cmd===It&&n.hideWaitingAssertionRetriesStatus(e.waitingSuccess).then(function(){return Dt.sendServiceMsg({cmd:At},t.source)})})},Yt.prototype._resetState=function(){this.state.debugging=!1,Ut.removeClass(h.panelsContainer(),Ht),this.actionsContainer.style.display="none",this.unlockButton.style.display="none",Rt.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText("")),this.progressBar.hide()},Yt.prototype._getFullStatusText=function(t){var e=this.contextStorage.getItem(qt)||"";return e+(e&&t?". ":"")+t},Yt.prototype._showWaitingStatus=function(){var t=this.state.assertionRetries?"Waiting for assertion execution...":"Waiting for element to appear...";Rt.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText(t)),this.progressBar.show()},Yt.prototype._hideWaitingStatus=function(e){var n=this;return new Nt(function(t){Rt.setTimeout.call(ql,function(){n.state.waiting||n.state.debugging||(Ut.removeClass(n.statusBar,jt),Ut.removeClass(n.statusBar,Wt),n.progressBar.determinateIndicator.reset(),n._resetState()),t()},e?0:500)})},Yt.prototype._showDebuggingStatus=function(t){var r=this;return new Nt(function(i){r.state.debugging=!0,r.state.locked=!0,Ut.addClass(h.panelsContainer(),Ht),t?(r.buttons.removeChild(r.nextButton),r.buttons.removeChild(r.resumeButton),r.buttons.appendChild(r.finishButton),Rt.nodeTextContentSetter.call(r.statusDiv,r._getFullStatusText("Test failed")),Ut.removeClass(r.statusBar,jt),Ut.addClass(r.statusBar,Wt)):Rt.nodeTextContentSetter.call(r.statusDiv,r._getFullStatusText("Debugging test...")),r.actionsContainer.style.display="",r.unlockButton.style.display="",r._bindClickOnce([r.resumeButton,r.nextButton,r.finishButton],function(t){var e=Rt.eventTargetGetter.call(t),n=$t.containsElement(r.nextButton,e);r._resetState(),i(n?Mt:Bt)})})},Yt.prototype._setWaitingStatus=function(t,e){var n=this;this.state.waiting=!0,this.progressBar.determinateIndicator.start(t,e),this.showingTimeout=Rt.setTimeout.call(ql,function(){n.showingTimeout=null,n._showWaitingStatus()},300)},Yt.prototype._resetWaitingStatus=function(t){this.state.waiting=!1,this.progressBar.determinateIndicator.stop(),t?Ut.addClass(this.statusBar,jt):Ut.addClass(this.statusBar,Wt);var e=this.showingTimeout&&t;return this.showingTimeout&&(Rt.clearTimeout.call(ql,this.showingTimeout),this.showingTimeout=null,t||this._showWaitingStatus()),this._hideWaitingStatus(e)},Yt.prototype.hidePageLoadingStatus=function(){this.state.created||this._create(),this.progressBar.indeterminateIndicator.stop(),this._resetState()},Yt.prototype.showDebuggingStatus=function(t){return this._stopAnimation(),Pt.set(this.statusBar,"opacity",1),Pt.set(this.statusBar,"visibility",""),this.state.hiden=!1,this._showDebuggingStatus(t)},Yt.prototype.showWaitingElementStatus=function(t){this.state.assertionRetries||this._setWaitingStatus(t)},Yt.prototype.hideWaitingElementStatus=function(t){return this.state.assertionRetries?Nt.resolve():this._resetWaitingStatus(t)},Yt.prototype.showWaitingAssertionRetriesStatus=function(t,e){this.state.assertionRetries=!0,this._setWaitingStatus(t,e)},Yt.prototype.hideWaitingAssertionRetriesStatus=function(t){var e=this;return this._resetWaitingStatus(t).then(function(){e.state.assertionRetries=!1})},Yt.prototype.setStatusPrefix=function(t){this.contextStorage.setItem(qt,t),Rt.nodeTextContentSetter.call(this.statusDiv,this._getFullStatusText(""))},Yt);function Yt(t,e,n,i){var r=Et.call(this)||this;return r.UNLOCK_PAGE_BTN_CLICK="testcafe|ui|status-bar|unlock-page-btn-click",r.userAgent=t,r.fixtureName=e,r.testName=n,r.contextStorage=i,r.statusBar=null,r.infoContainer=null,r.actionsContainer=null,r.icon=null,r.resumeButton=null,r.finishButton=null,r.nextButton=null,r.statusDiv=null,r.buttons=null,r.progressBar=null,r.animationInterval=null,r.showingTimeout=null,r.windowHeight=Gl.documentElement?Pt.getHeight(ql):ql.innerHeight,r.maxHeight=0,r.state={created:!1,showing:!1,hiding:!1,debugging:!1,waiting:!1,assertionRetries:!1,hidden:!1},r.currentView=null,r._createBeforeReady(),r._initChildListening(),r}var Xt,Kt=n.sendRequestToFrame,Jt=t.eventSandbox.message,Qt=(J(Zt,Xt=Gt),Zt.prototype.showWaitingElementStatus=function(t){Jt.sendServiceMsg({cmd:wt,timeout:t},ql.top)},Zt.prototype.hideWaitingElementStatus=function(t){return Kt({cmd:St,waitingSuccess:t},Tt,ql.top)},Zt.prototype.showWaitingAssertionRetriesStatus=function(t){Jt.sendServiceMsg({cmd:xt,timeout:t},ql.top)},Zt.prototype.hideWaitingAssertionRetriesStatus=function(t){return Kt({cmd:It,waitingSuccess:t},At,ql.top)},Zt);function Zt(){return Xt.call(this)||this}var te="ui|cursor|move|request",ee="ui|cursor|leftbuttondown|request",ne="ui|cursor|rightbuttondown|request",ie="ui|cursor|buttonup|request",re="ui|cursor|move|response",se="ui|cursor|leftbuttondown|response",oe="ui|cursor|rightbuttondown|response",ae="ui|cursor|buttonup|response",le=t.Promise,ue=t.shadowUI,ce=t.utils.browser,he=t.utils.featureDetection,de=t.eventSandbox.message,pe=n.styleUtils,fe=n.positionUtils,me="l-mouse-down",ve="r-mouse-down",ge=[me,ve].join(" ");de.on(de.SERVICE_MSG_RECEIVED_EVENT,function(t){var e=t.message;switch(e.cmd){case te:ye.move(fe.getIframePointRelativeToParentFrame({x:e.x,y:e.y},t.source)).then(function(){return de.sendServiceMsg({cmd:re},t.source)});break;case ee:ye.leftButtonDown().then(function(){return de.sendServiceMsg({cmd:se},t.source)});break;case ne:ye.rightButtonDown().then(function(){return de.sendServiceMsg({cmd:oe},t.source)});break;case ie:ye.buttonUp().then(function(){return de.sendServiceMsg({cmd:ae},t.source)})}});var ye={cursorElement:null,x:50,y:50,pointerOffsetX:0,pointerOffsetY:0,_createElement:function(){this.cursorElement=Gl.createElement("div"),ue.addClass(this.cursorElement,"cursor"),he.isTouchDevice&&!ce.isIE&&(ue.addClass(this.cursorElement,"touch"),this.pointerOffsetX=Math.ceil(pe.getWidth(this.cursorElement)/2),this.pointerOffsetY=Math.ceil(pe.getHeight(this.cursorElement)/2)),h.element().appendChild(this.cursorElement)},_ensureCursorElement:function(){return this.cursorElement||this._createElement(),!0},isVisible:function(){return this.cursorElement&&"hidden"!==pe.get(this.cursorElement,"visibility")},hide:function(){this._ensureCursorElement()&&this.isVisible()&&pe.set(this.cursorElement,"visibility","hidden")},show:function(){this._ensureCursorElement()&&pe.set(this.cursorElement,"visibility","")},move:function(t){return this._ensureCursorElement()&&(this.x=t.x,this.y=t.y,pe.set(this.cursorElement,{left:this.x-this.pointerOffsetX+"px",top:this.y-this.pointerOffsetY+"px"})),le.resolve()},leftButtonDown:function(){return this._ensureCursorElement()&&(ue.removeClass(this.cursorElement,ge),ue.addClass(this.cursorElement,me)),le.resolve()},rightButtonDown:function(){return this._ensureCursorElement()&&(ue.removeClass(this.cursorElement,ge),ue.addClass(this.cursorElement,ve)),le.resolve()},buttonUp:function(){return this._ensureCursorElement()&&ue.removeClass(this.cursorElement,ge),le.resolve()}},_e=t.utils.browser.isIE?1:0,Ce={move:function(t){var e={cmd:te,x:t.x+_e,y:t.y+_e};return c.sendRequestToFrame(e,re,ql.parent)},leftButtonDown:function(){return c.sendRequestToFrame({cmd:ee},se,ql.parent)},rightButtonDown:function(){return c.sendRequestToFrame({cmd:ne},oe,ql.parent)},buttonUp:function(){return c.sendRequestToFrame({cmd:ie},ae,ql.parent)}},be={screenshotMark:null,_createMark:function(){this.screenshotMark=Gl.createElement("img"),u.shadowUI.addClass(this.screenshotMark,"screenshot-mark"),this.screenshotMark.style.right=10/ql.devicePixelRatio+"px",this.screenshotMark.style.width=32/ql.devicePixelRatio+"px",this.screenshotMark.style.height=10/ql.devicePixelRatio+"px",this.hide(),u.shadowUI.getRoot().appendChild(this.screenshotMark)},hide:function(){this.screenshotMark&&(this.screenshotMark.style.visibility="hidden")},show:function(t){this.screenshotMark||this._createMark(),u.nativeMethods.imageSrcSetter.call(this.screenshotMark,t),this.screenshotMark.style.visibility=""}},Ee=t.shadowUI,we=t.nativeMethods;function Se(t){var e=t.tag,n=void 0===e?"div":e,i=t.class,r=t.src,s=t.text,o=t.type,a=t.value,l=Gl.createElement(n);return o&&we.setAttribute.call(l,"type",o),a&&we.inputValueSetter.call(l,a),r&&we.setAttribute.call(l,"src",r),i&&Ee.addClass(l,i),s&&we.nodeTextContentSetter.call(l,s),l}var Te=n.styleUtils;function xe(t,e){for(var n in e)Te.set(t,n,e[n])}var Ie={tag:"input",type:"button",value:"Pick",class:"pick-button"},Ae={tag:"input",type:"text",class:"selector-input"},Me={class:"match-indicator",text:"No Matching Elements"},Be={class:"expand-selector-list"},Ne={class:"selector-input-container"},Ue={tag:"input",type:"button",value:"Copy"},Re={class:"selectors-list"},De={class:"selector-inspector-panel"},ke={class:"element-frame"},Ve={class:"tooltip"},Oe={class:"arrow"},Pe={tag:"input",type:"text",class:"auxiliary-input"};function Fe(t){var e;t.parentElement||(e=h.panelsContainer(),h.element().insertBefore(t,e))}function $e(t){t.parentElement&&h.element().removeChild(t)}var Le,ze=ql["%testCafeCore%"],He=function(t,e){void 0===e&&(e=!1),this.type=t,this.editable=e,this.disabled=void 0},We=(J(je,Le=He),je);function je(t){return Le.call(this,t.toLowerCase(),!0)||this}var qe={edited:"$edited$",byTagName:"$tagName$",byId:"id",byText:"$text$",byClassAttr:"class",byAttr:"$attr$",byTagTree:"$dom$"},Ge=[new He(qe.byTagName),new He(qe.byId),new He(qe.byText),new He(qe.byClassAttr),new He(qe.byAttr),new He(qe.byTagTree)],Ye=qe.byTagTree,Xe=Object.freeze({__proto__:null,CustomSelectorRule:We,DEFAULT_SELECTOR_RULES:Ge,RULE_TYPE:qe,SelectorRule:He,UNSWITCHABLE_RULE_TYPE:Ye}),Ke=(Je.prototype.concat=function(t){return t.type===this.type?new Je(this.type,this.filter.concat(" ",t.filter)):null},Je);function Je(t,e){this.type=t,this.filter=e}var Qe="index",Ze="tag",tn="attr",en=ze.domUtils,nn=ze.arrayUtils;function rn(t,e){var n=en.getElementIndexInParent(e,t),i=new Ke(Ze,en.getTagName(t));return 0===n?[i]:[i,new Ke(Qe,n)]}function sn(t,e){for(var n=t.parentElement,i=[];n;){if(n===e)return i;i.push(n),n=n.parentElement}return i}var on=ze.domUtils,an=ze.arrayUtils,ln=(Object.defineProperty(un.prototype,"isCustom",{get:function(){return this.ancestorSelectorDescriptor?this.isCustomRule||this.ancestorSelectorDescriptor.isCustomRule:this.isCustomRule},enumerable:!1,configurable:!0}),un.prototype._getStringArrayRepresentation=function(){return function(t){for(var e=[],n=0,i=t;n<i.length;n++){var r,s=i[n];0===an.indexOf(t,s)?e.push("Selector('".concat(s.filter,"')")):"text"===s.type?e.push(".withText('".concat(s.filter,"')")):s.type===Qe?e.push(".nth(".concat(s.filter,")")):s.type===Ze?e.push(".find('".concat(s.filter,"')")):s.type===tn&&(r=s.filter.attrValueRe?", ".concat(s.filter.attrValueRe):"",e.push(".withAttribute('".concat(s.filter.attrName,"'").concat(r,")")))}return e}(this._concatFilterOptions())},un.prototype._addFilterByIndex=function(t){var e;1<t.length&&0!==(e=an.indexOf(t,this.element))&&this.filterOptions.push(new Ke(Qe,e))},un.prototype._concatFilterOptions=function(){var t=this.ancestorSelectorDescriptor,e=[];t&&(e=t._concatFilterOptions()),this.cssSelector&&e.push(new Ke(Ze,this.cssSelector));var n=an.concat(e,this.filterOptions);return an.reduce(n,function(t,e){if(e.type===Ze&&t.length){var n=t[t.length-1];if(n.type===Ze)return t[t.length-1]=n.concat(e),t}return t.push(e),t},[])},un.prototype._getElements=function(){if(this.ruleType===qe.byTagTree)return[this.element];var t=this.ancestorSelectorDescriptor?this.ancestorSelectorDescriptor.element:on.findDocument(this.element),e=null;if(this.cssSelector)try{var n=ql.eval("(function(){return '".concat(this.cssSelector,"';})();")),e=an.from(t.querySelectorAll(n))}catch(t){return null}else e=[t];return 0===(e=e.length&&this.filter?this.filter(e):e).length||-1===an.indexOf(e,this.element)?[]:e},un.createFromInstance=function(t,e){return new un({ancestorSelectorDescriptor:e,cssSelector:t.cssSelector,element:t.element,filter:t.filter,filterOptions:[].concat(t.filterOptions||[]),isCustomRule:t.isCustomRule,ruleType:t.ruleType})},un.prototype.makeUnique=function(){var t=this.ancestorSelectorDescriptor,e=t?t._getElements():[],n=!t||e?this._getElements():null;n&&(t&&t._addFilterByIndex(e),this._addFilterByIndex(n),this.stringArray=this._getStringArrayRepresentation())},un);function un(t){this.ruleType=t.ruleType,this.isCustomRule=t.isCustomRule,this.element=t.element,this.ancestorSelectorDescriptor=t.ancestorSelectorDescriptor,this.cssSelector=t.cssSelector,this.filterOptions=an.concat([],t.filterOptions||[]),this.filter=t.filter,this.stringArray=this._getStringArrayRepresentation()}var cn=(hn.prototype._init=function(){},hn.prototype._shouldCreate=function(){throw new Error("Not implemented")},hn.prototype._getDescriptor=function(){throw new Error("Not implemented")},hn.prototype.create=function(t,e){return this.element=t,this._init(),this._shouldCreate(e)?this._getDescriptor(e):null},hn);function hn(t){this.type=t,this.element=null}var dn,pn=ze.domUtils,fn=/html|body/,mn=/header|footer|main/,vn=(J(gn,dn=cn),gn.prototype._init=function(){this.tagName=pn.getTagName(this.element)},gn.prototype._shouldCreate=function(){return this.useTopLevelParents&&fn.test(this.tagName)||mn.test(this.tagName)},gn.prototype._getDescriptor=function(){return new ln({ruleType:this.type,element:this.element,cssSelector:this.tagName})},gn);function gn(t){void 0===t&&(t=!0);var e=dn.call(this,qe.byTagName)||this;return e.tagName="",e.useTopLevelParents=t,e}function yn(t){return t.replace(/\\/g,"\\\\\\$&").replace(/'/g,"\\\\\\$&").replace(/(\!|#|"|\$|%|&|\(|\||\)|\*|\+|,|\.|\/|:|;|<|=|>|\?|@|\[|\]|\^|`|{|\||}|~)/g,"\\\\$&")}function _n(t){return t.replace(/'|"|\\|\||\-|\*|\?|\+|\^|\$|\[|\]/g,"\\$&").replace(/\(|\)/g,"\\S")}var Cn=ql["%hammerhead%"],bn=/[\\^$*+?.()|[\]{}]/g,En=ze.selectorAttributeFilter,wn=ze.arrayUtils,Sn=Cn.nativeMethods;function Tn(t){return"string"==typeof t?new RegExp(t.replace(bn,"\\$&")):t}var xn=ze.domUtils,In=ze.arrayUtils,An=/\$ctl\d+|ctl\d+\$|_ctl\d+|ctl\d+_|^ctl\d+$/g,Mn="!!!!!separator!!!!!",Bn="!!!!!anyNumber!!!!!",Nn=new RegExp(Mn,"g"),Un=new RegExp(Bn,"g"),Rn=/\s{2,}/g,Dn="class";function kn(t,e,n,i,r){return new ln({ancestorSelectorDescriptor:r,cssSelector:n,element:e,filter:(o=(s=i).attrName,a=s.attrValueRe,function(t){return wn.filter(t,function(t){return En(t,0,void 0,Tn(o),Tn(a))})}),filterOptions:new Ke(tn,i),ruleType:t});var s,o,a}function Vn(t,e,n,i){var r=xn.getTagName(e),s="",o=null;return In.forEach(n,function(t){var e=t.name,n=t.value,i=!1,r=!1;50<n.replace(Rn," ").length&&(n=n.substr(0,50),i=!0),An.test(n)&&(r=!0,n=n.replace(An,function(t){return t.replace(/\d+/,Bn)})),Rn.test(n)&&(r=!0,n=n.replace(Rn,Mn)),r?o||(n=(n=_n(n)).replace(Un,"\\d+").replace(Nn,"\\s+"),o={attrName:e,attrValueRe:new RegExp(n)}):(n=e===Dn?yn(n).trimEnd():n.replace(/\\/g,"\\\\\\$&").replace(/'/g,"\\\\\\$&").replace(/"/g,"\\\\$&"),s+=e!==Dn||i?"[".concat(e).concat(i?"^":"").concat(n?'="'.concat(n,'"'):"","]"):(" "+n).replace(/\s+/g,"."))}),o?kn(t,e,s||r,o,i):new ln({ruleType:t,element:e,ancestorSelectorDescriptor:i,cssSelector:s})}var On,Pn=ze.domUtils,Fn=/_ctl\d+|ctl\d+_|^ctl\d+$/g,$n=(J(Ln,On=cn),Ln.prototype._init=function(){this.idAttr=this.element.getAttribute("id")},Ln.prototype._shouldCreate=function(){return!!this.idAttr},Ln.prototype._getDescriptor=function(){if(Fn.test(this.idAttr)){var t=(t=_n(this.idAttr)).replace(Fn,function(t){return t.replace(/\d+/,"\\d+")}),e=Pn.getTagName(this.element),n={attrName:"id",attrValueRe:new RegExp(t)};return kn(qe.byId,this.element,e,n)}return new ln({ruleType:qe.byId,element:this.element,cssSelector:"#"+yn(this.idAttr).replace(/\s/g,"\\\\ ")})},Ln);function Ln(){var t=On.call(this,qe.byId)||this;return t.idAttr=null,t}var zn=ze.domUtils,Hn=Cn.utils.trim,Wn=Cn.nativeMethods,jn=/^i$|^b$|^big$|^small$|^em$|^strong$|^dfn$|^code$|^samp$|^kbd$|^var$|^cite$|^abbr$|^acronym$|^sub$|^sup$|span$|^bdo$|^address$|^div$|^a$|^object$|^p$|^h\d$|^pre$|^q$|^ins$|^del$|^dt$|^dd$|^li$|^label$|^option$|^fieldset$|^legend$|^button$|^caption$|^td$|^th$|^title$/,qn=50,Gn=/['"\\]/g,Yn=/\r?\n|\r/i;function Xn(t){t=t.trim().replace(Gn,"\\$&");var e=Yn.exec(t),n=e?e.index:t.length;return Hn(t.substring(0,Math.min(n,qn)))}var Kn,Jn=ze.domUtils,Qn=(J(Zn,Kn=cn),Zn.prototype._init=function(){this.elementText=function(t){var e=zn.isHtmlElement(t)?Wn.htmlElementInnerTextGetter.call(t):t.innerText;if(e)return Xn(e);if(zn.isOptionElement(t)){var n=Wn.nodeTextContentGetter.call(t);return n?Xn(n):""}return""}(this.element)},Zn.prototype._shouldCreate=function(){return t=this.element,e=this.elementText,jn.test(zn.getTagName(t))?(e=Hn(e.replace(/\s+/g," ")),/\S/.test(e)):"";var t,e},Zn.prototype._getDescriptor=function(){return new ln({ruleType:this.type,element:this.element,cssSelector:Jn.getTagName(this.element),filterOptions:new Ke("text",this.elementText),filter:(e=this.elementText,function(t){return wn.filter(t,function(t){return-1<(Sn.htmlElementInnerTextGetter.call(t)||Sn.nodeTextContentGetter.call(t)).indexOf(e)})})});var e},Zn);function Zn(){var t=Kn.call(this,qe.byText)||this;return t.elementText="",t}var ti=ze.domUtils,ei=ze.arrayUtils,ni=Cn.nativeMethods,ii="%testcafe-stored-attributes%",ri=/(^alt$|^name$|^class$|^title$|^data-\S+)/,si=/^data-ga\S+/;function oi(t,e){void 0===e&&(e=[]);var n=t[ii];if(n)return ei.filter(n,function(t){return t.name!==Dn});for(var i,r=ni.elementAttributesGetter.call(t),s=[],o=0;o<r.length;o++)(i=r[o]).nodeName!==Dn&&function(t,e){void 0===e&&(e=[]);var n=t.nodeName;return t.nodeValue&&ri.test(n)&&-1===ei.indexOf(e,n)&&!si.test(n)&&!ti.isHammerheadAttr(n)}(i,e)&&s.push({name:i.nodeName,value:i.nodeValue});return s}var ai,li=(J(ui,ai=cn),ui.prototype._init=function(){this.elementAttributes=oi(this.element,this.customAttrNames)},ui.prototype._shouldCreate=function(){return!!this.elementAttributes.length},ui.prototype._getDescriptor=function(){return Vn(this.type,this.element,this.elementAttributes)},ui);function ui(t){void 0===t&&(t=[]);var e=ai.call(this,qe.byAttr)||this;return e.customAttrNames=t,e.elementAttributes=[],e}var ci,hi=(J(di,ci=cn),di.prototype._init=function(){this.className=function(t,e){for(var n,i=t[ii]||ni.elementAttributesGetter.call(t),r=0;r<i.length;r++)if((n=i[r]).name===e&&n.value)return n.value;return null}(this.element,Dn)},di.prototype._shouldCreate=function(){return!!this.className},di.prototype._getDescriptor=function(){return Vn(this.type,this.element,[{name:Dn,value:this.className}])},di);function di(){var t=ci.call(this,qe.byClassAttr)||this;return t.className="",t}var pi,fi,mi=ze.domUtils,vi=ze.arrayUtils,gi=(J(yi,pi=cn),yi.prototype._shouldCreate=function(t){var e=t?t.element:mi.findDocument(this.element).body;return this.parents=sn(this.element,e),this.parents.push(e),this.parents.length},yi.prototype._getDescriptor=function(t){var e,n="",i=[];return e=this.element,/html|body/.test(en.getTagName(e).toLowerCase())?i.push(new Ke(Ze,mi.getTagName(this.element))):i=function(t,e){for(var n=nn.reverse(rn(t,e[0])),i=e.length,r=0;r<i-1;r++){var s=rn(e[r],e[r+1]),o=s[0],a=s[1];a&&n.push(a),n.push(o)}return nn.reverse(n)}(this.element,this.parents),t?new ln({ruleType:this.type,element:this.element,ancestorSelectorDescriptor:t,filterOptions:i}):(i.length&&(n=i[0].filter,vi.splice(i,0,1)),new ln({ruleType:this.type,element:this.element,cssSelector:n,filterOptions:i}))},yi);function yi(){var t=pi.call(this,qe.byTagTree)||this;return t.parents=[],t}var _i,Ci=((fi={})[qe.byTagName]=new vn,fi[qe.byId]=new $n,fi[qe.byText]=new Qn,fi[qe.byClassAttr]=new hi,fi[qe.byAttr]=new li,fi[qe.byTagTree]=new gi,fi),bi=(J(Ei,_i=cn),Ei.prototype._init=function(){var t=function(t,e){var n=t["%testcafe-custom-stored-attributes%"];if(n){var i=ei.find(n,function(t){return t.name===e});return i||null}return t.hasAttribute(e)?{name:e,value:t.getAttribute(e)}:null}(this.element,this.attrName);this.elementAttributes=t?[t]:[]},Ei.prototype._shouldCreate=function(){return!!this.elementAttributes.length},Ei.prototype._getDescriptor=function(){var t=Vn(this.type,this.element,this.elementAttributes);return t.isCustomRule=!0,t},Ei);function Ei(t){var e=_i.call(this,t)||this;return e.attrName=t,e.elementAttributes=[],e}var wi=ze.arrayUtils,Si=[qe.byTagName,qe.byId,qe.byClassAttr,qe.byAttr],Ti=[qe.byText,qe.byClassAttr,qe.byAttr,qe.byTagTree];function xi(t){return t.isCustomRule||-1!==wi.indexOf(Ti,t.ruleType)&&t.ruleType!==qe.byTagTree}function Ii(t){return t.editable||-1!==wi.indexOf(Si,t.type)}var Ai=" > ";function Mi(t,e){return e?e+Ai+t:t}var Bi=1;function Ni(t){for(var e,n={},i=Bi,r=0,s=t;r<s.length;r++){var o=s[r];if(n[o.type]=i++,Ii(o))for(var a=0,l=t;a<l.length;a++){var u=l[a];!(e=u).editable&&-1===wi.indexOf(Ti,e.type)||(n[Mi(u.type,o.type)]=i++)}}return n}var Ui=ze.domUtils,Ri=ze.arrayUtils;function Di(t,e,n){for(var i=[],r=0,s=e;r<s.length;r++){var o=s[r].create(t,n);o&&i.push(o)}return i}function ki(t,e){for(var n=[],i=0,r=e;i<r.length;i++){var s=function(t,e){for(var n=0,i=t;n<i.length;n++){var r=i[n],s=e.create(r);if(s)return s}return null}(t,r[i]);s&&n.push(s)}return n}function Vi(t){for(var n=[],e=0,i=t;e<i.length;e++){var r=i[e],s=function(e){return function(t,e){for(var n=t.length,i=0;i<n;i++)if(e(t[i]))return i;return-1}(n,function(t){return Ri.join(t.stringArray,"")===Ri.join(e.stringArray,"")})}(r);-1===s?n.push(r):n[s].priority>r.priority&&Ri.splice(n,s,1,r)}return n}function Oi(t){function e(t){return t&&t.ancestorSelectorDescriptor?t.ancestorSelectorDescriptor.ruleType:null}for(var n=Ri.filter(t,function(t){return!t.isCustom}),i=Ri.filter(n,function(t){return t.ancestorSelectorDescriptor}),r=i.length,s=10-(n.length-r),o=r-1;s<r;){for(var a=e(i[o]);e(i[o-1])===a&&(Ri.remove(t,i[o]),!(--r<=s));)o--;o--}}function Pi(t){void 0===t&&(t=Ge),this.rules=Ri.filter(t,function(t){return!t.disabled});var e=Pi._processRules(this.rules),n=e.customRules,i=e.defaultRules;this.customRules=n,this.defaultRules=i,this.customAttrNames=[],this.customSelectorCreators=[],this.elementSelectorCreators=[],this.ancestorSelectorCreators=[],this._createCustomSelectorCreators(),this._createElementSelectorCreators(),this._createAncestorSelectorCreators(),this.rulePriority=Ni(this.rules)}var Fi=(Pi._priorityComparator=function(t,e){return t.priority-e.priority},Pi._getSelectorType=function(t){var e=t.ancestorSelectorDescriptor,n=e?e.ruleType:"";return Mi(t.ruleType,n)},Pi._processRules=function(t){var e=[],n=[];return Ri.filter(t,function(t){t.editable?n.push(t):e.push(t)}),{customRules:n,defaultRules:e}},Pi.prototype._createCustomSelectorCreators=function(){var e=this;Ri.forEach(this.customRules,function(t){e.customAttrNames.push(t.type),e.customSelectorCreators.push(new bi(t.type))})},Pi.prototype._createElementSelectorCreators=function(){var n=this,i=[];Ri.forEach(this.defaultRules,function(t){var e=t.type===qe.byAttr?new li(n.customAttrNames):Ci[t.type];i.push(e)}),this.elementSelectorCreators=Ri.concat(i,this.customSelectorCreators)},Pi.prototype._createAncestorSelectorCreators=function(){for(var t=0,e=this.customRules;t<e.length;t++){var n=e[t];this.ancestorSelectorCreators.push(new bi(n.type))}for(var i=0,r=this.defaultRules;i<r.length;i++)Ii(n=r[i])&&(n.type===qe.byTagName?this.ancestorSelectorCreators.push(new vn(!1)):this.ancestorSelectorCreators.push(Ci[n.type]))},Pi.prototype._generateCompoundSelectorDescriptor=function(t,e,n){for(var i=Ri.filter(n,xi),r=[],s=null,o=null,a=0,l=ki(e,this.ancestorSelectorCreators);a<l.length;a++){for(var u=l[a],c=0,h=i;c<h.length;c++){var d=h[c],o=ln.createFromInstance(u),s=ln.createFromInstance(d,o);r.push(s)}o=ln.createFromInstance(u),s=Di(t,[Ci[qe.byTagTree]],u),r=Ri.concat(r,s)}return r},Pi.prototype._cleanAndSortDescriptors=function(t){for(var e=[],n=0,i=t;n<i.length;n++){var r=i[n];r.makeUnique();var s=Pi._getSelectorType(r),o=this.rulePriority[s];null!==o&&(r.priority=o,e.push(r))}return Oi(e=(e=Vi(e)).sort(Pi._priorityComparator)),e},Pi.prototype._generateDescriptors=function(t){var e=Di(t,this.elementSelectorCreators),n=sn(t,Ui.findDocument(t).body),i=this._generateCompoundSelectorDescriptor(t,n,e),r=Ri.concat(e,i);return this._cleanAndSortDescriptors(r)},Pi.prototype.generate=function(t){var e=this._generateDescriptors(t);return Ri.map(e,function(t){var e=t.stringArray,n=t.ruleType,i=t.ancestorSelectorDescriptor,r={value:Ri.join(e,""),rules:[n]};return i&&r.rules.push(i.ruleType),r})},Pi.RULES=Xe,new Pi);function $i(){this.targets=new Map}var Li=($i.prototype._remove=function(t,e){this.targets.delete(t),$e(e)},$i.prototype._setPosition=function(t,e){for(var n,i,r,s=(n=t.getBoundingClientRect(),i=ql.pageYOffset||Gl.documentElement.scrollTop,r=ql.pageXOffset||Gl.documentElement.scrollLeft,{top:n.top+i,left:n.left+r,height:n.height,width:n.width,bottom:n.bottom+i,right:n.right+r}),o={},a=0,l=["top","left","width","height"];a<l.length;a++){var u=l[a];o[u]=s[u]+"px"}xe(e,o)},$i.prototype.highlight=function(t){var e;t&&!this.targets.has(t)&&(e=Se(ke),this.targets.set(t,e),this._setPosition(t,e),Fe(e))},$i.prototype.stopHighlighting=function(){var n=this;this.targets.forEach(function(t,e){return n._remove(e,t)})},new $i),zi=t.nativeMethods;function Hi(){this._createElements()}var Wi,ji=(Hi.prototype._createElements=function(){this.tooltip=Se(Ve),this.arrow=Se(Oe)},Hi.prototype._setTooltipText=function(t){zi.nodeTextContentSetter.call(this.tooltip,t)},Hi.prototype._getTooltipLeft=function(t,e,n,i){return n<=t?i:n-e<=t?n+i-t:e+i},Hi.prototype._getArrowLeft=function(t,e,n,i){return n-e<=t+12?n+i-t:e+i+12},Hi.prototype._getVerticalPostionStyles=function(t,e,n,i){var r={},s={},o=Gl.documentElement.scrollTop,a=t.height+e.height;return n.top>=a?(r.top=n.top+o-a+"px",s.top=n.top+o-e.height+"px",s.transform="none",s.visibility="visible"):i.height-n.bottom>=a?(r.top=n.bottom+o+e.height+"px",s.top=n.bottom+o+"px",s.transform="rotate(180deg)",s.visibility="visible"):(r.top=i.height+o-t.height+"px",s.top=o+"px",s.transform="node",s.visibility="hidden"),{tooltip:r,arrow:s}},Hi.prototype._getElementsStyles=function(t){var e=this.tooltip.getBoundingClientRect(),n=this.arrow.getBoundingClientRect(),i=t.getBoundingClientRect(),r={width:Gl.documentElement.clientWidth,height:Gl.documentElement.clientHeight},s=this._getVerticalPostionStyles(e,n,i,r),o=Gl.documentElement.scrollLeft;return s.tooltip.left=this._getTooltipLeft(e.width,i.left,r.width,o)+"px",s.arrow.left=this._getArrowLeft(n.width,i.left,r.width,o)+"px",s},Hi.prototype._placeElements=function(t){var e=this._getElementsStyles(t);xe(this.tooltip,e.tooltip),xe(this.arrow,e.arrow)},Hi.prototype.show=function(t,e){this._setTooltipText(t),this._placeElements(e),Fe(this.tooltip),Fe(this.arrow)},Hi.prototype.hide=function(){$e(this.tooltip),$e(this.arrow)},new Hi),qi=t.eventSandbox.listeners,Gi=n.styleUtils,Yi=n.serviceUtils,Xi="element-piked";function Ki(){var t=Wi.call(this)||this;return t.hiddenTestCafeElements=new Map,t.handlers={onClick:t._getClickHandler(),onMouseMove:t._getMouseMoveHandler()},t}var Ji=(J(Ki,Wi=Yi.EventEmitter),Ki.prototype._hideTestCafeElements=function(){for(var t=0,e=h.element().children;t<e.length;t++){var n=e[t],i=Gi.get(n,"visibility");this.hiddenTestCafeElements.set(n,i),Gi.set(n,"visibility","hidden")}},Ki.prototype._showTestCafeElements=function(){this.hiddenTestCafeElements.forEach(function(t,e){Gi.set(e,"visibility",t)}),this.hiddenTestCafeElements.clear()},Ki.prototype._getClickHandler=function(){var t=this;return function(){t._showTestCafeElements(),qi.removeInternalEventBeforeListener(ql,["mousemove"],t.handlers.onMouseMove),qi.removeInternalEventBeforeListener(ql,["click"],t.handlers.onClick),t.emit(Xi,t.actualSelectors),ji.hide()}},Ki.prototype._getMouseMoveHandler=function(){var r=this;return function(t){var e=t.clientX,n=t.clientY,i=Gl.elementFromPoint(e,n);i&&i!==r.actualTarget&&(r.actualTarget=i,r.actualSelectors=Fi.generate(i),Li.stopHighlighting(),Li.highlight(i),ji.show(r.actualSelectors[0].value,i))}},Ki.prototype.start=function(t){this._hideTestCafeElements(),qi.initElementListening(ql,["mousemove","click"]),qi.addFirstInternalEventBeforeListener(ql,["mousemove"],this.handlers.onMouseMove),qi.addFirstInternalEventBeforeListener(ql,["click"],this.handlers.onClick),this.handlers.onMouseMove(t)},new Ki),Qi=n.eventUtils,Zi=function(){this.element=Se(Ie),Qi.bind(this.element,"click",function(t){return Ji.start(t)})};function tr(t){return t}var er,nr=(function(t){function n(t){return!!o[t]}function i(t,e){this.references=t,this.transforms=e,this.circularCandidates=[],this.circularCandidatesDescrs=[],this.circularRefCount=0}var s=/^#*@(t|r)$/,r=(0,eval)("this"),o={Int8Array:"function"==typeof Int8Array?Int8Array:void 0,Uint8Array:"function"==typeof Uint8Array?Uint8Array:void 0,Uint8ClampedArray:"function"==typeof Uint8ClampedArray?Uint8ClampedArray:void 0,Int16Array:"function"==typeof Int16Array?Int16Array:void 0,Uint16Array:"function"==typeof Uint16Array?Uint16Array:void 0,Int32Array:"function"==typeof Int32Array?Int32Array:void 0,Uint32Array:"function"==typeof Uint32Array?Uint32Array:void 0,Float32Array:"function"==typeof Float32Array?Float32Array:void 0,Float64Array:"function"==typeof Float64Array?Float64Array:void 0},a="function"==typeof ArrayBuffer,l="function"==typeof Map,u="function"==typeof Set,c="function"==typeof Buffer,h=Array.prototype.slice,e={serialize:function(t){return JSON.stringify(t)},deserialize:function(t){return JSON.parse(t)}};function d(t,e){this.references=t,this.transformMap=e,this.activeTransformsStack=[],this.visitedRefs=Object.create(null)}i._createRefMark=function(t){var e=Object.create(null);return e["@r"]=t,e},i.prototype._createCircularCandidate=function(t,e,n){this.circularCandidates.push(t),this.circularCandidatesDescrs.push({parent:e,key:n,refIdx:-1})},i.prototype._applyTransform=function(t,e,n,i){var r=Object.create(null),s=i.toSerializable(t);return"object"==typeof s&&this._createCircularCandidate(t,e,n),r["@t"]=i.type,r.data=this._handleValue(s,e,n),r},i.prototype._handleArray=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=this._handleValue(t[n],e,n);return e},i.prototype._handlePlainObject=function(n){var i=this,r=Object.create(null);return Object.getOwnPropertyNames(n).forEach(function(t){var e=s.test(t)?"#"+t:t;r[e]=i._handleValue(n[t],r,e)}),r},i.prototype._handleObject=function(t,e,n){return this._createCircularCandidate(t,e,n),Array.isArray(t)?this._handleArray(t):this._handlePlainObject(t)},i.prototype._ensureCircularReference=function(t){var e=this.circularCandidates.indexOf(t);if(-1<e){var n=this.circularCandidatesDescrs[e];return-1===n.refIdx&&(n.refIdx=n.parent?++this.circularRefCount:0),i._createRefMark(n.refIdx)}return null},i.prototype._handleValue=function(t,e,n){var i=typeof t,r="object"==i&&null!==t;if(r){var s=this._ensureCircularReference(t);if(s)return s}for(var o=0;o<this.transforms.length;o++){var a=this.transforms[o];if(a.shouldTransform(i,t))return this._applyTransform(t,e,n,a)}return r?this._handleObject(t,e,n):t},i.prototype.transform=function(){for(var t=[this._handleValue(this.references,null,null)],e=0;e<this.circularCandidatesDescrs.length;e++){var n=this.circularCandidatesDescrs[e];0<n.refIdx&&(t[n.refIdx]=n.parent[n.key],n.parent[n.key]=i._createRefMark(n.refIdx))}return t},d.prototype._handlePlainObject=function(e){var t,n=this,i=Object.create(null),r=Object.getOwnPropertyNames(e);for(t in r.forEach(function(t){n._handleValue(e[t],e,t),s.test(t)&&(i[t.substring(1)]=e[t],delete e[t])}),i)e[t]=i[t]},d.prototype._handleTransformedObject=function(t,e,n){var i=t["@t"],r=this.transformMap[i];if(!r)throw new Error("Can't find transform for \""+i+'" type.');this.activeTransformsStack.push(t),this._handleValue(t.data,t,"data"),this.activeTransformsStack.pop(),e[n]=r.fromSerializable(t.data)},d.prototype._handleCircularSelfRefDuringTransform=function(t,e,n){var i=this.references,r=void 0;Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:function(){return void 0===r&&(r=i[t]),r},set:function(t){return r=t}})},d.prototype._handleCircularRef=function(t,e,n){-1<this.activeTransformsStack.indexOf(this.references[t])?this._handleCircularSelfRefDuringTransform(t,e,n):(this.visitedRefs[t]||(this.visitedRefs[t]=!0,this._handleValue(this.references[t],this.references,t)),e[n]=this.references[t])},d.prototype._handleValue=function(t,e,n){if("object"==typeof t&&null!==t){var i=t["@r"];if(void 0!==i)this._handleCircularRef(i,e,n);else if(t["@t"])this._handleTransformedObject(t,e,n);else if(Array.isArray(t))for(var r=0;r<t.length;r++)this._handleValue(t[r],t,r);else this._handlePlainObject(t)}},d.prototype.transform=function(){return this.visitedRefs[0]=!0,this._handleValue(this.references[0],this.references,0),this.references[0]};var p=[{type:"[[NaN]]",shouldTransform:function(t,e){return"number"===t&&isNaN(e)},toSerializable:function(){return""},fromSerializable:function(){return NaN}},{type:"[[undefined]]",shouldTransform:function(t){return"undefined"===t},toSerializable:function(){return""},fromSerializable:function(){}},{type:"[[Date]]",shouldTransform:function(t,e){return e instanceof Date},toSerializable:function(t){return t.getTime()},fromSerializable:function(t){var e=new Date;return e.setTime(t),e}},{type:"[[RegExp]]",shouldTransform:function(t,e){return e instanceof RegExp},toSerializable:function(t){var e={src:t.source,flags:""};return t.global&&(e.flags+="g"),t.ignoreCase&&(e.flags+="i"),t.multiline&&(e.flags+="m"),e},fromSerializable:function(t){return new RegExp(t.src,t.flags)}},{type:"[[Error]]",shouldTransform:function(t,e){return e instanceof Error},toSerializable:function(t){return{name:t.name,message:t.message,stack:t.stack}},fromSerializable:function(t){var e=new(r[t.name]||Error)(t.message);return e.stack=t.stack,e}},{type:"[[ArrayBuffer]]",shouldTransform:function(t,e){return a&&e instanceof ArrayBuffer},toSerializable:function(t){var e=new Int8Array(t);return h.call(e)},fromSerializable:function(t){if(a){var e=new ArrayBuffer(t.length);return new Int8Array(e).set(t),e}return t}},{type:"[[Buffer]]",shouldTransform:function(t,e){return c&&e instanceof Buffer},toSerializable:function(t){return h.call(t)},fromSerializable:function(t){return c?Buffer.from(t):t}},{type:"[[TypedArray]]",shouldTransform:function(t,e){return Object.keys(o).some(function(t){return n(t)&&e instanceof o[t]})},toSerializable:function(t){return{ctorName:t.constructor.name,arr:h.call(t)}},fromSerializable:function(t){return n(t.ctorName)?new o[t.ctorName](t.arr):t.arr}},{type:"[[Map]]",shouldTransform:function(t,e){return l&&e instanceof Map},toSerializable:function(t){var n=[];return t.forEach(function(t,e){n.push(e),n.push(t)}),n},fromSerializable:function(t){if(l){for(var e=new Map,n=0;n<t.length;n+=2)e.set(t[n],t[n+1]);return e}for(var i=[],r=0;r<t.length;r+=2)i.push([t[n],t[n+1]]);return i}},{type:"[[Set]]",shouldTransform:function(t,e){return u&&e instanceof Set},toSerializable:function(t){var e=[];return t.forEach(function(t){e.push(t)}),e},fromSerializable:function(t){if(u){for(var e=new Set,n=0;n<t.length;n++)e.add(t[n]);return e}return t}}],f=t.exports=function(t){this.transforms=[],this.transformsMap=Object.create(null),this.serializer=t||e,this.addTransforms(p)};f.prototype.addTransforms=function(t){t=Array.isArray(t)?t:[t];for(var e=0;e<t.length;e++){var n=t[e];if(this.transformsMap[n.type])throw new Error('Transform with type "'+n.type+'" was already added.');this.transforms.push(n),this.transformsMap[n.type]=n}return this},f.prototype.removeTransforms=function(t){t=Array.isArray(t)?t:[t];for(var e=0;e<t.length;e++){var n=t[e],i=this.transforms.indexOf(n);-1<i&&this.transforms.splice(i,1),delete this.transformsMap[n.type]}return this},f.prototype.encode=function(t){var e=new i(t,this.transforms).transform();return this.serializer.serialize(e)},f.prototype.decode=function(t){var e=this.serializer.deserialize(t);return new d(e,this.transformsMap).transform()}}(er={exports:{}}),er.exports);function ir(t){return new nr({serialize:tr,deserialize:tr}).addTransforms(t)}function rr(t,e){this.code=t,this.isTestCafeError=!0,this.callsite=e||null}var sr,or,ar="E1",lr="E4",ur="E5",cr="E9",hr="E10",dr="E11",pr="E12",fr="E24",mr="E26",vr="E27",gr="E28",yr="E29",_r="E30",Cr="E31",br="E32",Er="E33",wr="E34",Sr="E35",Tr="E36",xr="E37",Ir="E39",Ar="E40",Mr="E41",Br="E42",Nr="E43",Ur="E44",Rr="E45",Dr="E46",kr="E49",Vr="E50",Or="E51",Pr="E52",Fr="E57",$r="E64",Lr="E65",zr="E68",Hr="E69",Wr="E70",jr="E71",qr="E72",Gr="E73",Yr="E74",Xr="E76",Kr="E77",Jr="E78",Qr="E82",Zr="E83",ts="E90",es="E91",ns="E92",is="E93",rs="E94",ss="E95",os="E97",as="E99",ls="E100",us="E101",cs="E102",hs=(J(ds,sr=rr),ds);function ds(t,e,n){var i=sr.call(this,t)||this;return i.optionName=e,i.actualValue=n,i}function ps(t,e){var n=or.call(this,kr,e)||this;return n.instantiationCallsiteName=t,n}J(ps,or=rr);var fs,ms=(J(vs,fs=rr),vs);function vs(t,e){var n=fs.call(this,Vr,e)||this;return n.instantiationCallsiteName=t,n}var gs,ys=(J(_s,gs=rr),_s);function _s(t,e,n){var i=void 0===e?{}:e,r=i.apiFnChain,s=i.apiFnIndex,o=i.reason,a=gs.call(this,t,n)||this;return a.apiFnChain=r,a.apiFnIndex=s,a.reason=o,a}var Cs,bs,Es,ws=(J(Ss,Cs=rr),Ss);function Ss(t){return Cs.call(this,Or,t)||this}function Ts(t,e){return bs.call(this,Pr,e,t)||this}function xs(t,e){var n=Es.call(this,ar)||this;return n.errStack=t,n.pageDestUrl=e,n}J(Ts,bs=ys),J(xs,Es=rr);var Is,As=(J(Ms,Is=rr),Ms);function Ms(t,e,n){var i=Is.call(this,lr,n)||this;return i.errMsg=String(e),i.instantiationCallsiteName=t,i}var Bs,Ns,Us,Rs,Ds,ks,Vs,Os,Ps,Fs,$s,Ls,zs,Hs,Ws,js,qs,Gs,Ys,Xs,Ks,Js,Qs,Zs,to,eo,no,io,ro,so,oo,ao,lo,uo,co,ho,po,fo,mo,vo,go,yo,_o,Co,bo,Eo,wo,So,To,xo,Io,Ao,Mo,Bo=(J(No,Bs=rr),No);function No(t,e,n,i){var r=Bs.call(this,ur,i)||this;return r.errMsg=String(e),r.property=n,r.instantiationCallsiteName=t,r}function Uo(t){var e=Ns.call(this,$r)||this;return e.errMsg=String(t),e}function Ro(t,e){var n=Us.call(this,Lr)||this;return n.errMsg=String(t),n.moduleName=e,n}function Do(t,e){return Rs.call(this,cr,t,e)||this}function ko(t,e){return Ds.call(this,hr,t,e)||this}function Vo(t,e){return ks.call(this,dr,t,e)||this}function Oo(t,e){return Vs.call(this,pr,t,e)||this}function Po(t,e){return Os.call(this,ts,t,e)||this}function Fo(t,e){return Ps.call(this,os,t,e)||this}function $o(t,e){return Fs.call(this,es,t,e)||this}function Lo(t,e){return $s.call(this,ns,t,e)||this}function zo(t,e){return Ls.call(this,is,t,e)||this}function Ho(t,e){return zs.call(this,rs,t,e)||this}function Wo(t,e){return Hs.call(this,ss,t,e)||this}function jo(t,e){return Ws.call(this,as,t,e)||this}function qo(t,e,n){var i=js.call(this,ls)||this;return i.objectName=t,i.propertyName=e,i.availableProperties=n,i}function Go(t,e){return qs.call(this,fr,e,t)||this}function Yo(t,e){return Gs.call(this,mr,e,t)||this}function Xo(t){var e=Ys.call(this,vr)||this;return e.nodeDescription=t,e}function Ko(t,e){var n=Xs.call(this,gr,e)||this;return n.argumentName=t,n}function Jo(t){return Ks.call(this,us,t)||this}function Qo(t,e){var n=Js.call(this,yr,e)||this;return n.argumentName=t,n}function Zo(t,e){var n=Qs.call(this,_r)||this;return n.argumentName=t,n.nodeDescription=e,n}function ta(){return Zs.call(this,Cr)||this}function ea(){return to.call(this,br)||this}function na(t){var e=eo.call(this,Er)||this;return e.argumentName=t,e}function ia(){return no.call(this,Sr)||this}function ra(t){var e=io.call(this,Tr)||this;return e.argumentName=t,e}function sa(t,e){var n=ro.call(this,xr)||this;return n.filePaths=t,n.scannedFilePaths=e,n}function oa(){return so.call(this,wr)||this}function aa(t,e){var n=oo.call(this,Mr)||this;return n.properties=t?"scrollTargetY property":e?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",n}function la(t,e){var n=ao.call(this,Fr)||this;return t<=0?e<=0?(n.verb="are",n.dimensions="width and height"):(n.verb="is",n.dimensions="width"):(n.verb="is",n.dimensions="height"),n}function ua(t){return lo.call(this,Ar,t)||this}function ca(){return uo.call(this,Ir)||this}function ha(){return co.call(this,Br)||this}function da(){return ho.call(this,Hr)||this}function pa(){return po.call(this,zr)||this}function fa(){return fo.call(this,Wr)||this}function ma(){return mo.call(this,jr)||this}function va(){return vo.call(this,Gr)||this}function ga(){return go.call(this,Qr)||this}function ya(t){var e=yo.call(this,Jr)||this;return e.errMsg=t,e}function _a(){return _o.call(this,Yr)||this}function Ca(){return Co.call(this,Xr)||this}function ba(){return bo.call(this,Kr)||this}function Ea(){return Eo.call(this,qr)||this}function wa(){return wo.call(this,Zr)||this}function Sa(){return So.call(this,Nr)||this}function Ta(){return To.call(this,Ur)||this}function xa(t,e){var n=xo.call(this,Rr)||this;return n.dialogType=t,n.pageUrl=e,n}function Ia(t,e,n){var i=Io.call(this,Dr)||this;return i.dialogType=t,i.errMsg=e,i.pageUrl=n,i}function Aa(){return Ao.call(this,cs)||this}J(Uo,Ns=rr),J(Ro,Us=rr),J(Do,Rs=hs),J(ko,Ds=hs),J(Vo,ks=hs),J(Oo,Vs=hs),J(Po,Os=hs),J(Fo,Ps=hs),J($o,Fs=hs),J(Lo,$s=hs),J(zo,Ls=hs),J(Ho,zs=hs),J(Wo,Hs=hs),J(jo,Ws=hs),J(qo,js=rr),J(Go,qs=ys),J(Yo,Gs=ys),J(Xo,Ys=rr),J(Ko,Xs=ys),J(Jo,Ks=rr),J(Qo,Js=ys),J(Zo,Qs=rr),J(ta,Zs=rr),J(ea,to=rr),J(na,eo=rr),J(ia,no=rr),J(ra,io=rr),J(sa,ro=rr),J(oa,so=rr),J(aa,oo=rr),J(la,ao=rr),J(ua,lo=rr),J(ca,uo=rr),J(ha,co=rr),J(da,ho=rr),J(pa,po=rr),J(fa,fo=rr),J(ma,mo=rr),J(va,vo=rr),J(ga,go=rr),J(ya,yo=rr),J(_a,_o=rr),J(Ca,Co=rr),J(ba,bo=rr),J(Ea,Eo=rr),J(wa,wo=rr),J(Sa,So=rr),J(Ta,To=rr),J(xa,xo=rr),J(Ia,Io=rr),J(Aa,Ao=rr);var Ma=1,Ba=2,Na=3,Ua=((Mo={})[Ma]=/^\.filterVisible\(\)$/,Mo[Ba]=/^\.filterHidden\(\)$/,Mo[Na]=/^\.nth\(\d+\)$/,Mo);function Ra(){this._err=null}var Da=(Object.defineProperty(Ra.prototype,"error",{get:function(){return this._err},set:function(t){null===this._err&&(this._err=t)},enumerable:!1,configurable:!0}),Ra.prototype.filter=function(t,e,n){if(e.filterVisible&&(t=t.filter(c.positionUtils.isElementVisible),this._assertFilterError(t,n,Ma)),e.filterHidden&&(t=t.filter(function(t){return!c.positionUtils.isElementVisible(t)}),this._assertFilterError(t,n,Ba)),e.counterMode)return null===e.index?t.length:Ra._getNodeByIndex(t,e.index)?1:0;var i;if(e.collectionMode)return null!==e.index&&(t=(i=Ra._getNodeByIndex(t,e.index))?[i]:[],this._assertFilterError(t,n,Na)),t;var r=Ra._getNodeByIndex(t,e.index||0);return r||(this.error=Ra._getErrorItem(n,Na)),r},Ra.prototype.cast=function(t){if(null==t)return[];if(t instanceof u.nativeMethods.Node)return[t];if(function(t){if(u.nativeMethods.isArray(t)){for(var e=0;e<t.length;e++)if(!(t[e]instanceof u.nativeMethods.Node))return;return 1}}(t))return t;if((e=t)instanceof u.nativeMethods.HTMLCollection||e instanceof u.nativeMethods.NodeList)return function(t){for(var e=t.length,n=[],i=0;i<e;i++)n.push(t[i]);return n}(t);var e;throw new ws},Ra.prototype._assertFilterError=function(t,e,n){0===t.length&&(this.error=Ra._getErrorItem(e,n))},Ra._getErrorItem=function(t,e){var n=t.apiFnChain,i=t.apiFnID;if(e)for(var r=i;r<n.length;r++)if(Ua[e].test(n[r]))return r;return null},Ra._getNodeByIndex=function(t,e){return e<0?t[t.length+e]:t[e]},new Ra);function ka(t,e){return new u.nativeMethods.Function("fnCode","__dependencies$","Promise","RegExp",'"use strict"; return eval(fnCode)')(t,e,u.Promise,RegExp)}var Va=(Oa.prototype.shouldTransform=function(t){return"function"===t},Oa.prototype.toSerializable=function(){return""},Oa.prototype.fromSerializable=function(t){var e=t.fnCode,n=t.dependencies;return"filterOptions"in n&&(n.selectorFilter=Da),ka(e,n)},Oa);function Oa(){this.type="Function"}var Pa=(Fa.prototype.shouldTransform=function(t,e){if(e instanceof u.nativeMethods.Node)throw new ms(this._instantiationCallsiteName);return!1},Fa.prototype.toSerializable=function(){},Fa.prototype.fromSerializable=function(){},Fa);function Fa(t){this.type="Node",this._instantiationCallsiteName=t}var $a=(La.prototype.getResult=function(){var e=this;return u.Promise.resolve().then(function(){var t=e.replicator.decode(e.command.args);return e._executeFn(t)}).catch(function(t){throw t.isTestCafeError||(t=new As(e.command.instantiationCallsiteName,t)),t})},La.prototype.encodeResult=function(t){return this.replicator.encode(t)},La.prototype._createReplicator=function(){return ir([new Pa(this.command.instantiationCallsiteName),new Va])},La.prototype._executeFn=function(t){return this.fn.apply(ql,t)},La);function La(t){this.command=t,this.replicator=this._createReplicator(),this.dependencies=this.replicator.decode(t.dependencies),this.fn=ka(t.fnCode,this.dependencies)}var za=["nodeType","textContent","childNodeCount","hasChildNodes","childElementCount","hasChildElements"],Ha=["tagName","attributes"],Wa=["tagName","visible","focused","attributes","boundingClientRect","classNames","style","innerText","namespaceURI","id","value","checked","selected","selectedIndex","scrollWidth","scrollHeight","scrollLeft","scrollTop","offsetWidth","offsetHeight","offsetLeft","offsetTop","clientWidth","clientHeight","clientLeft","clientTop"],ja={childNodeCount:function(t){return t.childNodes.length},hasChildNodes:function(t){return!!ja.childNodeCount(t)},childElementCount:function(t){var e=t.children;if(e)return e.length;for(var n=0,i=t.childNodes.length,r=0;r<i;r++)1===t.childNodes[r].nodeType&&n++;return n},hasChildElements:function(t){return!!ja.childElementCount(t)}},qa=(Ga.prototype._initializeProperties=function(t,e,n){for(var i=0,r=e;i<r.length;i++){var s=r[i],o=n[s];this[s]=o?o(t):t[s]}},Ga);function Ga(){}var Ya,Xa=(J(Ka,Ya=qa),Ka);function Ka(t){var e=Ya.call(this)||this;return e._initializeProperties(t,za,ja),e}var Ja,Qa={tagName:function(t){return t.tagName.toLowerCase()},visible:function(t){return c.positionUtils.isElementVisible(t)},focused:function(t){return u.utils.dom.getActiveElement()===t},attributes:function(t){for(var e=t.attributes,n={},i=e.length-1;0<=i;i--)n[e[i].name]=e[i].value;return n},boundingClientRect:function(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height}},classNames:function(t){var e=t.className;return"string"==typeof e.animVal&&(e=e.animVal),e.replace(/^\s+|\s+$/g,"").split(/\s+/g)},style:function(t){for(var e={},n=ql.getComputedStyle(t),i=0;i<n.length;i++){var r=n[i];e[r]=n[r]}return e},innerText:function(t){return t.innerText}};function Za(t){var e=Ja.call(this)||this;return e._initializeProperties(t,Ha,Qa),e}J(Za,Ja=qa);var tl,el=(J(nl,tl=Xa),nl);function nl(t){var e=tl.call(this,t)||this;return e._initializeProperties(t,Wa,Qa),e}var il=(rl.prototype._extend=function(t,e){for(var n=0,i=u.nativeMethods.objectKeys(this._customDOMProperties);n<i.length;n++){var r=i[n];try{t[r]=this._customDOMProperties[r](e)}catch(t){throw new Bo(this._instantiationCallsiteName,t,r)}}},rl.prototype.shouldTransform=function(t,e){return e instanceof u.nativeMethods.Node},rl.prototype.toSerializable=function(t){var e=new(1===t.nodeType?el:Xa)(t);return this._extend(e,t),e},rl.prototype.fromSerializable=function(){},rl);function rl(t,e){void 0===t&&(t={}),this.type="Node",this._customDOMProperties=t,this._instantiationCallsiteName=e}var sl,ol=(J(al,sl=$a),al.prototype._createReplicator=function(){return ir([new Va])},al.prototype._getTimeoutErrorParams=function(t){return{apiFnIndex:Da.error,apiFnChain:this.command.apiFnChain,reason:c.positionUtils.getHiddenReason(t)}},al.prototype._getTimeoutError=function(t){return t?this.createIsInvisibleError:this.createNotFoundError},al.prototype._validateElement=function(o,a){var l=this;return u.Promise.resolve().then(function(){return sl.prototype._executeFn.call(l,o)}).then(function(t){var e=t,n=!!e,i=!l.command.visibilityCheck||e&&c.positionUtils.isElementVisible(e),r=u.nativeMethods.dateNow()-a>=l.timeout;if(n&&(i||u.utils.dom.isShadowRoot(e)))return e;if(!r)return c.delay(200).then(function(){return l._validateElement(o,a)});var s=l.getVisibleValueMode?null:l._getTimeoutError(n);if(s)throw s(l._getTimeoutErrorParams(e));return null})},al.prototype._executeFn=function(t){return this.counterMode?sl.prototype._executeFn.call(this,t):this._validateElement(t,u.nativeMethods.dateNow())},al);function al(t,e,n,i,r){var s,o=sl.call(this,t)||this;o.createNotFoundError=i,o.createIsInvisibleError=r,o.timeout="number"==typeof t.timeout?t.timeout:e,o.counterMode=o.dependencies.filterOptions.counterMode,o.getVisibleValueMode=o.dependencies.filterOptions.getVisibleValueMode,o.dependencies.selectorFilter=Da,n&&(s=u.nativeMethods.dateNow()-n,o.timeout=Math.max(o.timeout-s,0));var a=o.dependencies.customDOMProperties;return o.replicator.addTransforms([new il(a,t.instantiationCallsiteName)]),o}var ll={testCafeDriver:"%testCafeDriver%",testCafeIframeDriver:"%testCafeIframeDriver%",testCafeEmbeddingUtils:"%testCafeEmbeddingUtils%",testCafeDriverInstance:"%testCafeDriverInstance%"},ul=5e3;function cl(){return null}function hl(){return null}function dl(e){return Q(this,void 0,void 0,function(){return Z(this,function(t){switch(t.label){case 0:return[4,function(n){return Q(this,void 0,void 0,function(){var e;return Z(this,function(t){return e=ql[ll.testCafeDriverInstance].communicationUrls,[2,c.browser.parseSelector(e.parseSelector,u.createNativeXHR,n)]})})}(e)];case 1:return[2,function(n){return Q(this,void 0,void 0,function(){var e;return Z(this,function(t){switch(t.label){case 0:return e=u.nativeMethods.date(),[4,new ol(n,ul,e,cl,hl).getResult()];case 1:return[2,t.sent()]}})})}(t.sent()).catch(function(){return null})]}})})}var pl,fl=t.eventSandbox.listeners,ml=n.serviceUtils,vl="list-changed",gl="selector-selected";function yl(){var e=pl.call(this)||this;return e._pickedSelectors=[],e.element=Se(Re),Ji.on(Xi,function(t){e.pickedSelectors=t}),e}var _l=(J(yl,pl=ml.EventEmitter),Object.defineProperty(yl.prototype,"pickedSelectors",{get:function(){return this._pickedSelectors},set:function(t){void 0===t&&(t=[]),this._pickedSelectors!==t&&(this._pickedSelectors=t,this.emit(vl,t))},enumerable:!1,configurable:!0}),yl.prototype._renderSelectors=function(){var n=this;this.pickedSelectors.forEach(function(t){var e=Se({text:t.value,class:"selector-value"});n.element.appendChild(e)}),this.renderedSelectors=this.pickedSelectors},yl.prototype._clear=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.renderedSelectors=null},yl.prototype._addClickListener=function(){var e=this,n=function(t){$e(e.element),t.target.parentElement===e.element&&e.emit(gl,t.target.innerText),fl.removeInternalEventBeforeListener(ql,["click"],n)};fl.addFirstInternalEventBeforeListener(ql,["click"],n)},yl.prototype.show=function(t){var e,n=t.left,i=t.bottom,r=t.width;this.pickedSelectors&&0!==this.pickedSelectors.length&&(this.pickedSelectors!==this.renderedSelectors&&(this._clear(),this._renderSelectors()),e={left:n+"px",bottom:i+"px",width:r+"px"},Fe(this.element),xe(this.element,e),this._addClickListener())},yl.prototype.clear=function(){this.pickedSelectors=null},new yl),Cl=t.nativeMethods,bl=t.shadowUI,El=n.eventUtils,wl="enabled",Sl={notFound:"not-found",invalid:"invalid",ok:"ok"},Tl=(Object.defineProperty(xl.prototype,"value",{get:function(){return Cl.inputValueGetter.call(this.input)},set:function(t){Cl.inputValueSetter.call(this.input,t)},enumerable:!1,configurable:!0}),xl.prototype._createElements=function(){this.element=Se(Ne),this.input=Se(Ae),this.indicator=Se(Me),this.expandButton=Se(Be),this.element.appendChild(this.input),this.element.appendChild(this.indicator),this.element.appendChild(this.expandButton)},xl.prototype._addEventListeners=function(){var e=this;El.bind(this.expandButton,"click",function(){return e._expandSelectorsList()}),El.bind(this.input,"input",function(){return e._onSelectorTyped()}),El.bind(this.input,"focus",function(){return e._onFocusInput()}),El.bind(this.input,"blur",function(){return Li.stopHighlighting()}),_l.on(vl,function(t){e._updateExpandButton(t)}),_l.on(gl,function(t){e._setSelectorInputValue({value:t})}),Ji.on(Xi,function(t){e._setSelectorInputValue(t[0])})},xl.prototype._setMatchIndicatorText=function(t){Cl.nodeTextContentSetter.call(this.indicator,t)},xl.prototype._setMatchIndicatorClass=function(t){for(var e in Sl)bl.removeClass(this.indicator,Sl[e]);bl.addClass(this.indicator,t)},xl.prototype._indicateMatches=function(t){return null===t?(this._setMatchIndicatorText("Invalid Selector"),void this._setMatchIndicatorClass(Sl.invalid)):0===t.length?(this._setMatchIndicatorText("No Matching Elements"),void this._setMatchIndicatorClass(Sl.notFound)):(this._setMatchIndicatorText("Found: ".concat(t.length)),void this._setMatchIndicatorClass(Sl.ok))},xl.prototype._highlightElements=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e];Li.highlight(i)}},xl.prototype._setSelectorInputValue=function(t){this.value=t.value,this.input.focus()},xl.prototype._expandSelectorsList=function(){var t=this.element.getBoundingClientRect(),e=t.left,n=t.top,i={left:e,width:t.width,bottom:Gl.documentElement.clientHeight-n+1};_l.show(i)},xl.prototype._updateExpandButton=function(t){t&&t.length?bl.addClass(this.expandButton,wl):bl.removeClass(this.expandButton,wl)},xl.prototype._onSelectorTyped=function(){_l.clear(),this._onFocusInput()},xl.prototype._onFocusInput=function(){return Q(this,void 0,void 0,function(){var e;return Z(this,function(t){switch(t.label){case 0:return Li.stopHighlighting(),this.value?[4,dl(this.value)]:(this._indicateMatches([]),[2]);case 1:return e=t.sent(),this._indicateMatches(e),this._highlightElements(e),[2]}})})},xl);function xl(){this._createElements(),this._addEventListeners()}var Il=t.nativeMethods,Al=n.eventUtils,Ml="Copy",Bl="Copied!",Nl=(Ul.prototype._copySelector=function(){var t,e;t=this.sourceElement.value,Fe(e=Se(Pe)),e.value=t,e.select(),Gl.execCommand("copy"),$e(e),this._animate()},Ul.prototype._animate=function(){var t=this;this._changeAppearance(Bl,"bold"),Il.setTimeout.call(ql,function(){return t._resetAppearance()},1200)},Ul.prototype._resetAppearance=function(){this._changeAppearance(Ml,"")},Ul.prototype._changeAppearance=function(t,e){Il.inputValueSetter.call(this.element,t),xe(this.element,{fontWeight:e})},Ul);function Ul(t){var e=this;this.element=Se(Ue),this.sourceElement=t,Al.bind(this.element,"click",function(){return e._copySelector()})}var Rl=(Dl.prototype.show=function(){this.element.parentElement||h.insertFirstChildToPanelsContainer(this.element),xe(this.element,{display:"flex"})},Dl.prototype.hide=function(){xe(this.element,{display:"none"})},Dl);function Dl(){this.elementPicker=Ji,this.element=Se(De);var t=new Zi,e=new Tl,n=new Nl(e);this.element.appendChild(t.element),this.element.appendChild(e.element),this.element.appendChild(n.element)}var kl=t.Promise,Vl=t.eventSandbox.message,Ol=n.sendRequestToFrame,Pl="ui|hide|request",Fl="ui|hide|response",$l="ui|show|request",Ll="ui|show|response";Vl.on(Vl.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===Pl?(h.hide(),Vl.sendServiceMsg({cmd:Fl},t.source)):t.message.cmd===$l&&(h.show(),Vl.sendServiceMsg({cmd:Ll},t.source))});var zl={};zl.uiRoot=h,zl.cursorUI=ye,zl.iframeCursorUI=Ce,zl.selectElement=i,zl.modalBackground=k,zl.ProgressPanel=Y,zl.StatusBar=Gt,zl.IframeStatusBar=Qt,zl.SelectorInspectorPanel=Rl,zl.hide=function(t){return t?Ol({cmd:Pl},Fl,ql.top):(h.hide(),kl.resolve())},zl.show=function(t){return t?Ol({cmd:$l},Ll,ql.top):(h.show(),kl.resolve())},zl.showScreenshotMark=function(t){return be.show(t)},zl.hideScreenshotMark=function(){return be.hide()};var Hl=t.nativeMethods,Wl=t.EVENTS.evalIframeScript;Hl.objectDefineProperty(ql,"%testCafeUI%",{configurable:!0,value:zl}),t.on(Wl,function(t){return jl(Hl.contentWindowGetter.call(t.iframe))})}(ql["%hammerhead%"],ql["%testCafeCore%"],ql["%hammerhead%"].Promise)}(window);